(function(i){var c=navigator.userAgent.toLowerCase(),n=function(p){return p.test(c)},k=Object.prototype.toString,d=n(/opera/),a=n(/\bchrome\b/),g=n(/webkit/),m=!a&&n(/safari/),e=!d&&n(/msie/),o=!!document.createElement("canvas").getContext,b=!g&&n(/gecko/),l=n(/ipod|ipad|iphone|android/gi),j={Linear:function(q,p,s,r){return s*q/r+p},Cubic:{easeIn:function(q,p,s,r){return s*(q/=r)*q*q+p},easeOut:function(q,p,s,r){return s*((q=q/r-1)*q*q+1)+p},easeInOut:function(q,p,s,r){if((q/=r/2)<1){return s/2*q*q*q+p}return s/2*((q-=2)*q*q+2)+p}}};var f=(function(U){var E=false,p=false,F=[],R=(function(){if(document.addEventListener){return function(){document.removeEventListener("DOMContentLoaded",R,false);t()}}else{if(document.attachEvent){return function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",R);t()}}}}})(),v=function(){if(E){return}try{document.documentElement.doScroll("left")}catch(ae){setTimeout(v,1);return}t()},t=function(){if(!E){E=true;for(var ae=0;ae<F.length;ae++){F[ae].call(document)}F=[]}},S=function(){if(p){return}p=true;if(document.readyState==="complete"){return setTimeout(t,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",R,false);U.addEventListener("load",t,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",R);U.attachEvent("onload",t);var ae=false;try{ae=U.frameElement==null}catch(af){}if(document.documentElement.doScroll&&ae){v()}}}},s=function(ae){S();if(E){ae.call(document,ac)}else{F.push(function(){return ae.call(this)})}},ac=function(ae){if(!ae||ae.nodeType){return ae}if(typeof ae==="string"){if(ae.indexOf("#")!=-1){ae=ae.substring(1)}return document.getElementById(ae)}if(typeof ae==="function"){s(ae)}};ac.apply=function(ag,af){if(ag&&af&&typeof af=="object"){for(var ae in af){if(typeof af[ae]!="undefined"){ag[ae]=af[ae]}}}if(!af&&ag){var ah={};for(var ae in ag){ah[ae]=ag[ae]}return ah}return ag};ac.apply(ac,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(af,ae){return af===null||af===undefined||((ac.isArray(af)&&!af.length))||(!ae?af==="":false)},isArray:function(ae){return k.apply(ae)==="[object Array]"},isDate:function(ae){return k.apply(ae)==="[object Date]"},isObject:function(ae){return !!ae&&k.apply(ae)==="[object Object]"},isFunction:function(ae){return k.apply(ae)==="[object Function]"},isNumber:function(ae){return typeof ae==="number"&&isFinite(ae)},isString:function(ae){return typeof ae==="string"},isBoolean:function(ae){return typeof ae==="boolean"},isFalse:function(ae){return typeof ae==="boolean"&&!ae},isElement:function(ae){return ae?!!ae.tagName:false},isDefined:function(ae){return typeof ae!=="undefined"}});ac.applyIf=function(ag,af){if(ag&&ac.isObject(af)){for(var ae in af){if(ac.isDefined(af[ae])&&!ac.isDefined(ag[ae])){ag[ae]=af[ae]}}}if(!af&&ag){return ac.apply(ag)}return ag};ac.merge=function(ah,ag,af){if(ah&&ac.isObject(ag)){for(var ae in ag){if(ac.isDefined(ag[ae])){if(ac.isObject(ag[ae])){if(ac.isObject(ah[ae])){ac.merge(ah[ae],ag[ae])}else{ah[ae]=ac.clone(ag[ae],true)}}else{ah[ae]=ag[ae]}}}if(ac.isObject(af)){return ac.merge(ah,af)}}return ah};ac.clone=function(ag,ai,af){var aj={};if(ac.isArray(ag)&&ac.isObject(ai)){for(var ah=0;ah<ag.length;ah++){if(af&&ac.isObject(ai[ag[ah]])){aj[ag[ah]]=ac.clone(ai[ag[ah]],af)}else{aj[ag[ah]]=ai[ag[ah]]}}}else{if(ac.isObject(ag)){for(var ae in ag){if(ai&&ac.isObject(ag[ae])&&!(ag[ae].ICHARTJS_OBJECT)){aj[ae]=ac.clone(ag[ae],ai)}else{aj[ae]=ag[ae]}}}}return aj};ac.override=function(af,ae){if(af&&ae){var ag=af.prototype;ac.apply(ag,ae);if(ac.isIE&&ae.hasOwnProperty("toString")){ag.toString=ae.toString}}};ac.extend=function(){var af=function(ag){for(var ah in ag){this[ah]=ag[ah]}};var ae=Object.prototype.constructor;return function(ai,al){var ag=function(){ai.apply(this,arguments)};var aj=function(){},ah,ak=ai.prototype;aj.prototype=ak;ah=ag.prototype=new aj();ah.constructor=ag;ag.superclass=ak;if(ak.constructor==ae){ak.constructor=ai}ag.override=function(am){ac.override(ag,am)};ah.superclass=ah.supr=(function(){return ak});ah.override=af;ac.override(ag,al);ag.extend=function(am){return ac.extend(ag,am)};ag.plugin_={};ag.plugin=function(an,am){if(ac.isString(an)&&ac.isFunction(am)){ag.plugin_[an]=am}};return ag}}();var y=Math.sin,q=Math.cos,J=Math.atan,T=Math.tan,Z=Math.acos,O=Math.sqrt,I=Math.abs,z=Math.PI,x=2*z,H=Math.ceil,W=Math.round,u=Math.floor,D=Math.max,ab=Math.min,P=parseFloat,A={},ad={},X=function(af,ae){if(af==0){return af}var ah=I(af),ag=0.1;if(ah>1){while(ah>1){ah=ah/10;ag=ag*10}return u(af/ag+ae)*ag}else{ag=1;while(ah<1){ah=ah*10;ag=ag*10}return W(af*ag+ae)/ag}},V={white:"rgb(255,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",yellow:"rgb(255,255,0)",black:"rgb(0,0,0)"},aa=function(ae){ae=ae.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3");return(ae.length==7?"rgba(":"rgb(")+parseInt(ae.substring(0,2),16)+","+parseInt(ae.substring(2,4),16)+","+parseInt(ae.substring(4,6),16)+(ae.length==7?",0."+ae.substring(6,7)+")":")")},G=function(ae){return("0"+parseInt(ae).toString(16)).slice(-2)},K=function(af){var ae=af.match(/rgb\((\d+),(\d+),(\d+)\)/);return ae?("#"+G(ae[1])+G(ae[2])+G(ae[3])).toUpperCase():null},w=function(af){var ae=/rgb\((\w*),(\w*),(\w*)\)/.exec(af);if(ae){return new Array(ae[1],ae[2],ae[3])}ae=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(af);if(ae){return new Array(ae[1],ae[2],ae[3],ae[4])}throw new Error("invalid colors value '"+af+"'")},Q=function(ak,aj,af){if(ac.isArray(ak)){aj=ak[1];af=ak[2];ak=ak[0]}ak=ak/255;aj=aj/255;af=af/255;var ae=D(D(ak,aj),af),ag=ab(ab(ak,aj),af),ah=ae-ag;if(ah==0){return new Array(0,0,ae)}var ai;if(ak==ae){ai=(aj-af)/ah}else{if(aj==ae){ai=(af-ak)/ah+2}else{if(af==ae){ai=(ak-aj)/ah+4}}}ai*=60;if(ai<0){ai+=360}return new Array(ai,ah/ae,ae)},M=function(ae){if(!ae){return ae}ae=ae.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(ae)){return ae}if(/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(ae)){return ae}if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(ae)){return aa(ae)}if(V[ae]){return V[ae]}throw new Error("invalid colors value '"+ae+"'")},N=function(ai,ap,an,am){if(ac.isArray(ai)){am=ap;ap=ai[1];an=ai[2];ai=ai[0]}var ae,aj,al,ah=u(ai/60)%6,ak=ai/60-ah,ag=an*(1-ap),af=an*(1-ap*ak),ao=an*(1-ap*(1-ak));switch(ah){case 0:ae=an;aj=ao;al=ag;break;case 1:ae=af;aj=an;al=ag;break;case 2:ae=ag;aj=an;al=ao;break;case 3:ae=ag;aj=af;al=an;break;case 4:ae=ao;aj=ag;al=an;break;case 5:ae=an;aj=ag;al=af;break}return"rgb"+(am?"a":"")+"("+W(ae*255)+","+W(aj*255)+","+W(al*255)+(am?","+am+")":")")},B=0.05,L=0.14,Y=function(ae,af){af=af||L;if(ae>0.5){return af-(1-ae)/10}else{if(ae>0.1){return af-0.16+ae/5}else{return ae>af?af:ae/2}}},C=function(ai,ag,af,ah){if(!ag){return ag}ag=w(M(ag));var ae=Q(ag);ah=ah!=0?(ah||B):ah;ae[1]-=ah;if(ai){ae[2]-=Y(ae[2],af);ae[1]=ac.upTo(ae[1],1);ae[2]=ac.lowTo(ae[2],0)}else{ae[2]+=Y((1-ae[2]),af);ae[1]=ac.lowTo(ae[1],0);ae[2]=ac.upTo(ae[2],1)}return N(ae,ag[3])},r=function(ae){if(ae==0){return 0}if(ae%x==0){return x}return ae%x};ac.apply(ac,{getFont:function(ae,ag,ah,af){return ae+" "+ag+(af||"px")+" "+ah},getDoc:function(){var ae=U.contentWindow?U.contentWindow.document:U.contentDocument?U.contentDocument:U.document;return ae},DefineAbstract:function(af,ae){if(!ae[af]){throw new Error("Cannot instantiate the type '"+ae.type+"'.you must implements it with method '"+af+"'.")}},getAA:function(ae){if(ae=="linear"){return j.Linear}if(ae=="easeInOut"||ae=="easeIn"||ae=="easeOut"){return j.Cubic[ae]}return j.Linear},noConflict:function(){return f},plugin:function(af,ae,ag){if(ac.isFunction(af)){af.plugin(ae,ag)}},parsePadding:function(ae,af){ae=ae||0;if(ac.isNumber(ae)){return new Array(ae,ae,ae,ae)}if(ac.isArray(ae)){return ae}af=af||0;ae=ae.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");if(ae.length==1){ae[0]=ae[1]=ae[2]=ae[3]=P(ae[0])||af}else{if(ae.length==2){ae[0]=ae[2]=P(ae[0])||af;ae[1]=ae[3]=P(ae[1])||af}else{if(ae.length==3){ae[0]=P(ae[0])||af;ae[1]=ae[3]=P(ae[1])||af;ae[2]=P(ae[2])||af}else{ae[0]=P(ae[0])||af;ae[1]=P(ae[1])||af;ae[2]=P(ae[2])||af;ae[3]=P(ae[3])||af}}}return ae},distanceP2P:function(af,ah,ae,ag){return O((ae-af)*(ae-af)+(ag-ah)*(ag-ah))},atan2Radian:function(ag,af,ae,aj){if(ag==ae){if(aj>af){return z/2}return z*3/2}if(af==aj){if(ae>ag){return 0}return z}var ai=ac.quadrant(ag,af,ae,aj),ah=J(I((af-aj)/(ag-ae)));return ai?(ai==3?x:z)+(ai==2?ah:-ah):ah},angle2Radian:function(ae){return ae*z/180},radian2Angle:function(ae){return ae*180/z},quadrant:function(ag,af,ae,ah){if(ag<ae){if(af<ah){return 0}else{return 3}}else{if(af<ah){return 1}else{return 2}}},toPI2:function(ae){while(ae<0){ae+=x}return ae},visible:function(af,ah,ag){if(af>=ah){return[]}var ae=ac.quadrantd(af),ai=ac.quadrantd(ah);if((ae==2||ae==3)&&(ai==2||ai==3)&&((ah-af)<z)){return[]}af=ac.toPI2(af);ah=ac.toPI2(ah);if(ah<=af){ah+=x}if(af>z){af=x}else{if(ah>x){return[{s:af,e:z,f:ag},{s:x,e:ah,f:ag}]}else{if(ah>z){ah=z}}}return{s:af,e:ah,f:ag}},quadrantd:function(ae){if(ae==0){return 0}if(ae%x==0){return 3}while(ae<0){ae+=x}return H(2*(ae%x)/z)-1},upTo:function(af,ae){return ae>af?af:ae},lowTo:function(ae,af){return af<ae?ae:af},between:function(ae,ag,af){return ae>ag?ac.between(ag,ae,af):(af>ag?ag:af<ae?ae:af)},inRange:function(ae,ag,af){return ag>af&&ae<af},angleInRange:function(ae,ag,af){af=(af-ae);af=af<0?af+x:af;af=af%x;return(ag-ae)>af},angleZInRange:function(ae,ag,af){return ag<ae?(af>ae||af<ag):(ag>af&&ae<af)},inRangeClosed:function(ae,ag,af){return ag>=af&&ae<=af},inEllipse:function(af,ah,ag,ae){return(af*af/ag/ag+ah*ah/ae/ae)<=1},p2Point:function(ae,ah,af,ag){return{x:ae+q(af)*ag,y:ah+y(af)*ag}},toRgb:M,toRgba:function(ag,af){var ae=w(M(ag));return"rgba("+ae[0]+","+ae[1]+","+ae[2]+","+af+")"},vectorP2P:function(ae,ag,af){if(!af){ag=ac.angle2Radian(ag);ae=ac.angle2Radian(ae)}ag=y(ag);return{x:ag*y(ae),y:ag*q(ae)}},uid:function(ae){return(ae||"ichartjs")+"_"+H(Math.random()*10000)+new Date().getTime().toString().substring(4)},register:function(af){if(ac.isString(af)){ad[af.toLowerCase()]=af}else{var ae=af.get("id");if(!ae||ae==""){ae=ac.uid(af.type);while(A[ae]){ae=ac.uid(af.type)}af.push("id",ae)}if(A[ae]){throw new Error("exist reduplicate id :"+ae)}af.id=ae;A[ae]=af}},create:function(ae){if(!ae.type||!ad[ae.type]){throw new Error("TypeNotFoundException["+ae.type+"]")}return new ac[ad[ae.type]](ae)},get:function(ae){return A[ae]},isPercent:function(ae){return ac.isString(ae)&&ae.match(/(.*)%/)},parsePercent:function(ae,af){if(ac.isString(ae)){ae=ae.match(/(.*)%/);if(ae){ae=af?u(P(ae[1])*af/100):ae[1]/100}}return(!ae||ae<=0||ae>af)?af:ae},parseFloat:function(ae,af){if(!ac.isNumber(ae)){ae=P(ae);if(!ac.isNumber(ae)){throw new Error("["+af+"]="+ae+"is not a valid number.")}}return ae},ceil:function(ae){return X(ae,1)},floor:function(ae,af){return X(ae,-1)},_2D:"2d",_3D:"3d",light:function(af,ae,ag){return C(false,af,ae,ag)},dark:function(af,ae,ag){return C(true,af,ae,ag)},fixPixel:function(ae){return ac.isNumber(ae)?ae:P(ae.replace("px",""))||0},toPixel:function(ae){return ac.isNumber(ae)?ae+"px":ac.fixPixel(ae)+"px"},emptyFn:function(){return true},supportCanvas:o,isOpera:d,isWebKit:g,isChrome:a,isSafari:m,isIE:e,isGecko:b,isMobile:l,touch:"ontouchend" in document,FRAME:l?30:60});ac.Assert={isTrue:function(ae,af){if(ae!==true){throw new Error(af)}}};ac.requestAnimFrame=(function(){var ae=U.requestAnimationFrame||U.webkitRequestAnimationFrame||U.mozRequestAnimationFrame||U.oRequestAnimationFrame||U.msRequestAnimationFrame||function(af){U.setTimeout(af,1000/60)};return function(af){ae(af)}})();ac.Event={addEvent:function(ah,ag,af,ae){if(ah.addEventListener){ah.addEventListener(ag,af,ae)}else{if(ah.attachEvent){ah.attachEvent("on"+ag,af)}else{ah["on"+ag]=af}}},fix:function(aj){if(typeof(aj)=="undefined"){aj=U.event}var ag={target:aj.target,pageX:aj.pageX,pageY:aj.pageY,offsetX:aj.offsetX,offsetY:aj.offsetY,stopPropagation:false,event:aj};if(typeof(aj.offsetX)=="undefined"){if(!aj.target){ag.target=aj.srcElement||document}if(aj.targetTouches){ag.pageX=aj.targetTouches[0].pageX;ag.pageY=aj.targetTouches[0].pageY}if(ag.pageX==null&&aj.clientX!=null){var ai=document.documentElement,af=document.body;ag.pageX=aj.clientX+(ai&&ai.scrollLeft||af&&af.scrollLeft||0)-(ai&&ai.clientLeft||af&&af.clientLeft||0);ag.pageY=aj.clientY+(ai&&ai.scrollTop||af&&af.scrollTop||0)-(ai&&ai.clientTop||af&&af.clientTop||0)}var ae=0,ak=0,ah=aj.target;while(ah!=document.body&&ah){ae+=ah.offsetLeft-(ah.scrollLeft||0);ak+=ah.offsetTop;ah=ah.offsetParent}ag.offsetX=ag.pageX-ae;ag.offsetY=ag.pageY-ak}ag.x=ag.offsetX;ag.y=ag.offsetY;if(!aj.stopPropagation){aj.stopPropagation=function(){U.event.cancelBubble=true}}return ag}};return ac})(i);Array.prototype.each=function(v,t){var p=this.length,u;for(var q=0;q<p;q++){u=t?v.call(t,this[q],q):v(this[q],q);if(typeof u==="boolean"&&!u){break}}return this};Array.prototype.eachAll=function(q,p){this.each(function(s,r){if(f.isArray(s)){return s.eachAll(q,p)}else{return p?q.call(p,s,r):q(s,r)}},p)};Array.prototype.sor=function(u){var s=this,p=s.length-1,r;for(var t=0;t<p;t++){for(var q=p;q>t;q--){if(u?!u(s[q],s[q-1]):(s[q]<s[q-1])){r=s[q];s[q]=s[q-1];s[q-1]=r}}}};i.iChart=f;if(!i.$){i.$=i.iChart}})(window);(function(a){a.Element=function(c){var b=this._();b.type="element";b.ICHARTJS_OBJECT=true;a.DefineAbstract("configure",b);a.DefineAbstract("afterConfiguration",b);b.options={};b.set({border:{enable:false,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:false,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});b.W="width";b.H="height";b.O="top";b.B="bottom";b.L="left";b.R="right";b.C="center";b.X="originx";b.Y="originy";b.variable={};b.events={"mouseup":[],"touchstart":[],"touchmove":[],"touchend":[],"mousedown":[],"dblclick":[]};b.registerEvent("initialize");b.initialization=false;b.configure.apply(b,Array.prototype.slice.call(arguments,1));b.default_=a.clone(b.options,true);b.set(c);b.afterConfiguration(b)};a.Element.prototype={_:function(){return this},afterConfiguration:function(b){if(a.isObject(b.get("listeners"))){for(var c in b.get("listeners")){b.on(c,b.get("listeners")[c])}}b.initialize();b.fireEvent(b,"initialize",[b])},registerEvent:function(){for(var b=0;b<arguments.length;b++){this.events[arguments[b]]=[]}},fireString:function(f,c,b,e){var d=this.fireEvent(f,c,b);return a.isString(d)?d:(d!==true&&a.isDefined(d)?d.toString():e)},fireEvent:function(g,d,c){var b=this.events[d].length;if(b==1){return this.events[d][0].apply(g,c)}var f=true;for(var e=0;e<b;e++){if(!this.events[d][e].apply(g,c)){f=false}}return f},on:function(c,b){if(a.isString(c)&&a.isArray(this.events[c])){this.events[c].push(b)}else{if(a.isArray(c)){c.each(function(d){this.on(d,b)},this)}}return this},getPlugin:function(b){return this.constructor.plugin_[b]},set:function(b){if(a.isObject(b)){a.merge(this.options,b)}},pushIf:function(c,b){if(!a.isDefined(this.get(c))||this.get(c)==null){return this.push(c,b)}return this.get(c)},push:function(g,e){var c=g.split("."),b=c.length-1,d=this.options;for(var f=0;f<b;f++){if(!d[c[f]]){d[c[f]]={}}d=d[c[f]]}d[c[b]]=e;return e},get:function(e){var b=e.split("."),c=this.options[b[0]];for(var d=1;d<b.length;d++){if(!c){return null}c=c[b[d]]}return c}};a.Painter=a.extend(a.Element,{configure:function(){this.type="painter";this.dimension=a._2D;a.DefineAbstract("commonDraw",this);a.DefineAbstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:true},gradient:false,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null});this.variable.event={mouseover:false};this.variable.animation={};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==a._3D},applyGradient:function(b,f,c,e){var d=this._();if(d.get("gradient")&&d.get("f_color")){d.push("f_color",d.T.gradient(b||d.x||0,f||d.y||0,c||d.get(d.W),e||d.get(d.H),[d.get("dark_color"),d.get("light_color")],d.get("gradient_mode")));d.push("light_color",d.T.gradient(b||d.x||0,f||d.y||0,c||d.get(d.W),e||d.get(d.H),[d.get("background_color"),d.get("light_color")],d.get("gradient_mode")));d.push("f_color_",d.get("f_color"))}},draw:function(c,b){if(b){this.root.draw(c)}else{if(!this.fireEvent(this,"beforedraw",[this,c])){return this}this.commonDraw(this,c);this.fireEvent(this,"draw",[this,c])}},inject:function(b){if(b){this.root=b;this.target=this.T=b.T}},doConfig:function(){var d=this._(),l=a.parsePadding(d.get("padding")),c=d.get("border.enable"),c=c?a.parsePadding(d.get("border.width")):[0,0,0,0],e=a.toRgb(d.get("background_color")),k=d.get("color_factor"),i=d.get("gradient")?0:null;d.set({border_top:c[0],border_right:c[1],border_bottom:c[2],border_left:c[3],hborder:c[1]+c[3],vborder:c[0]+c[2],padding_top:l[0]+c[0],padding_right:l[1]+c[1],padding_bottom:l[2]+c[2],padding_left:l[3]+c[3],hpadding:l[1]+l[3]+c[1]+c[3],vpadding:l[0]+l[2]+c[0]+c[2]});if(d.get("shadow")===true){d.push("shadow",{color:d.get("shadow_color"),blur:d.get("shadow_blur"),offsetx:d.get("shadow_offsetx"),offsety:d.get("shadow_offsety")})}d.push("f_color",e);d.push("f_color_",e);d.push("light_color",a.light(e,k,i));d.push("dark_color",a.dark(e,k*0.8,i));d.push("light_color2",a.light(e,k*2,i));if(d.is3D()&&!d.get("xAngle_")){var j=a.vectorP2P(d.get("xAngle"),d.get("yAngle"));d.push("xAngle_",j.x);d.push("yAngle_",j.y)}}});a.Html=a.extend(a.Element,{configure:function(b){this.type="html";this.T=b;a.DefineAbstract("beforeshow",this);this.set({animation:true,default_action:true,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){var b=this._();b.wrap=b.get("wrap");b.dom=document.createElement("div");if(b.get("shadow")){b.css("boxShadow",b.get("shadow_offsetx")+"px "+b.get("shadow_offsety")+"px "+b.get("shadow_blur")+"px "+b.get("shadow_color"))}if(b.get("border.enable")){b.css("border",b.get("border.width")+"px "+b.get("border.style")+" "+b.get("border.color"));b.css("borderRadius",b.get("border.radius")+"px")}b.css("position","absolute");b.css("zIndex",b.get("index"));b.applyStyle();b.wrap.appendChild(b.dom);b.style=b.dom.style;if(b.get("default_action")){b.doAction(b)}},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(d,b){var c="transitionend";if(a.isWebKit){c="webkitTransitionEnd"}else{if(a.isOpera){c="oTransitionEnd"}}a.Event.addEvent(this.dom,c,d,b)},destroy:function(){this.wrap.removeChild(this.dom);this.dom=null},transition:function(b){this.transitions=this.transitions==""?b:this.transitions+","+b;if(a.isWebKit){this.css("WebkitTransition",this.transitions)}else{if(a.isGecko){this.css("MozTransition",this.transitions)}else{if(a.isOpera){this.css("OTransition",this.transitions)}else{this.css("transition",this.transitions)}}}},beforeshow:function(d,b,c){c.follow(d,b,c)},show:function(c,b){this.beforeshow(c,b,this);this.css("visibility","visible");if(this.get("animation")){this.css("opacity",1)}},hidden:function(b){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(c,b){if(a.isString(c)){if(a.isDefined(b)){this.dom.style[c]=b}else{return this.dom.style[c]}}},applyStyle:function(){var d=this.get("style").split(";"),c;for(var b=0;b<d.length;b++){c=d[b].split(":");if(c.length>1){this.css(c[0],c[1])}}}});a.Component=a.extend(a.Painter,{configure:function(b){a.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:false,border:{width:2}}});this.atomic=false;this.proxy=false;this.ICHARTJS_CHART=false;this.inject(b)},initialize:function(){a.DefineAbstract("isEventValid",this);a.DefineAbstract("doDraw",this);this.doConfig();this.initialization=true},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){if(this.tip){this.tip.destroy()}},doConfig:function(){a.Component.superclass.doConfig.call(this);var e=this._(),d=e.get(e.W),c=e.get("maxwidth"),b=e.get(e.X);if(d&&c){d=e.push(e.W,a.parsePercent(d,c));if(d>c){d=e.push("width",c)}if(c>d){var f=e.get("align")||e.C;if(f==e.C){b+=(c-d)/2}else{if(f==e.R){b+=(c-d)}}}}e.x=e.push(e.X,b+e.get("offsetx"));e.y=e.push(e.Y,e.get(e.Y)+e.get("offsety"));e.push("fontStyle",a.getFont(e.get("fontweight"),e.get("fontsize"),e.get("font"),e.get("fontunit")));e.data=e.get("data");if(e.get("tip.enable")){e.pushIf("tip.border.color",e.get("f_color"));if(!a.isFunction(e.get("tip.invokeOffset"))){e.push("tip.invokeOffset",e.tipInvoke())}}},isMouseOver:function(b){return this.isEventValid(b,this)},redraw:function(b){this.root.draw(b,this.root.Combination)},last:a.emptyFn,commonDraw:function(b){if(!b.proxy){b.doDraw.call(b,b)}}});a.Tip=a.extend(a.Html,{configure:function(){a.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:false,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:true,radius:5},delay:200});this.registerEvent("parseText")},position:function(d,b,c){c.style.top=(d<0?0:d)+"px";c.style.left=(b<0?0:b)+"px"},follow:function(d,b,c){if(c.get("invokeOffsetDynamic")){if(b.hit){if(a.isString(b.text)||a.isNumber(b.text)){c.text(b.name,b.value,b.text,b.i,c)}var f=c.get("invokeOffset")(c.width(),c.height(),b);c.position(f.top,f.left,c)}}else{if(c.get("showType")!="follow"&&a.isFunction(c.get("invokeOffset"))){var f=c.get("invokeOffset")(c.width(),c.height(),b);c.position(f.top,f.left,c)}else{c.position((d.y-c.height()*1.1-2),d.x+2,c)}}},text:function(f,b,e,d,c){c.dom.innerHTML=c.fireString(c,"parseText",[c,f,b,e,d],e)},hidden:function(b){if(this.get("animation")){this.css("opacity",0)}else{this.css("visibility","hidden")}},doAction:function(b){b.T.on("mouseover",function(g,f,d){b.show(f,d)}).on("mouseout",function(g,f,d){b.hidden(f)});if(b.get("showType")=="follow"){b.T.on("mousemove",function(g,f,d){if(b.T.variable.event.mouseover){setTimeout(function(){if(b.T.variable.event.mouseover){b.follow(f,d,b)}},b.get("delay"))}})}},initialize:function(){a.Tip.superclass.initialize.call(this);var c=this._();c.text(c.get("name"),c.get("value"),c.get("text"),c.get("index"),c);c.hidden();if(c.get("animation")){var b=c.get("move_duration")/1000+"s "+c.get("timing_function")+" 0s";c.transition("opacity "+c.get("fade_duration")/1000+"s "+c.get("timing_function")+" 0s");c.transition("top "+b);c.transition("left "+b);c.onTransitionEnd(function(d){if(c.css("opacity")==0){c.css("visibility","hidden")}},false)}}});a.CrossHair=a.extend(a.Html,{configure:function(){a.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({top:0,left:0,hcross:true,vcross:true,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(d,b,c){if(c.get("invokeOffset")){var f=c.get("invokeOffset")(d,b);if(f&&f.hit){c.o_valid=true;c.position(f.top-c.top,f.left-c.left,c)}else{if(!f||!c.o_valid){c.position(c.owidth,c.oheight,c)}}}else{c.position(d.y-c.top-1,d.x-c.left-1,c)}},position:function(d,b,c){c.horizontal.style.top=(d-c.size)+"px";c.vertical.style.left=(b-c.size)+"px"},doCreate:function(c,b,e){var f=document.createElement("div");f.style.width=a.toPixel(b);f.style.height=a.toPixel(e);f.style.backgroundColor=c.get("line_color");f.style.position="absolute";c.dom.appendChild(f);return f},doAction:function(b){b.T.on("mouseover",function(g,f,d){b.show(f,d)}).on("mouseout",function(g,f,d){b.hidden(f,d)}).on("mousemove",function(g,f,d){b.follow(f,d,b)})},initialize:function(){a.CrossHair.superclass.initialize.call(this);var c=this._(),b=a.toPixel(c.get("line_width"));c.size=c.get("line_width")/2;c.top=a.fixPixel(c.get(c.O));c.left=a.fixPixel(c.get(c.L));c.owidth=-c.T.root.width;c.oheight=-c.T.root.height;c.o_valid=false;c.css("width","0px");c.css("height","0px");c.css("top",c.top+"px");c.css("left",c.left+"px");c.css("visibility","hidden");c.horizontal=c.doCreate(c,c.get("hcross")?a.toPixel(c.get(c.W)):"0px",b);c.vertical=c.doCreate(c,b,c.get("vcross")?a.toPixel(c.get(c.H)):"0px")}});a.Legend=a.extend(a.Component,{configure:function(){a.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:undefined,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:false,align:"right",valign:"middle"});this.atomic=true;this.registerEvent("parse")},isEventValid:function(d,b){var c={valid:false};if(d.x>this.x&&d.x<(b.x+b.width)&&d.y>b.y&&d.y<(b.y+b.height)){b.data.each(function(f,e){if(d.x>f.x&&d.x<(f.x+f.width_+b.get("signwidth"))&&d.y>f.y&&d.y<(f.y+b.get("line_height"))){c={valid:true,index:e,target:f};return false}},b)}return c},drawCell:function(b,k,i,c,j,d){var e=d.get("sign_size"),g=d.getPlugin("sign");if(!g||!g.call(d,d.T,j,{x:b+e/2,y:k},e,c)){if(j.indexOf("bar")!=-1){d.T.box(b,k-e/12,e,e/6,0,c)}if(j=="round"){d.T.round(b+e/2,k,e/2,c)}else{if(j=="round-bar"){d.T.round(b+e/2,k,e/4,c)}else{if(j=="square-bar"){d.T.box(b+e/4,k-e/4,e/2,e/2,0,c)}else{if(j=="square"){d.T.box(b,k-e/2,e,e,0,c)}}}}}d.T.fillText(i,b+d.get("signwidth"),k,0,d.get("text_with_sign_color")?c:d.get("color"),"lr",d.get("line_height"))},doDraw:function(b){b.T.box(b.x,b.y,b.width,b.height,b.get("border"),b.get("f_color"),false,b.get("shadow"));b.T.textStyle(b.L,"middle",a.getFont(b.get("fontweight"),b.get("fontsize"),b.get("font")));b.data.each(function(c){b.drawCell(c.x,c.y,c.text,c.color,c.sign,b)})},doLayout:function(v,m){var A=v.get("sign_size"),u=0,k=0,z=0,p=v.get("column"),b=v.get("row"),o=v.data.length;v.T.textFont(v.get("fontStyle"));if(v.get("line_height")<A){v.push("line_height",A+A/5)}v.push("signwidth",(A+v.get("sign_space")));v.data.each(function(c){c.width_=v.T.measureText(c.text)},v);for(var f=0;f<p;f++){z=0;for(var e=f;e<o;e+=p){z=Math.max(z,v.data[e].width_)}v.columnwidth[f]=z;u+=z}for(var f=0;f<b;f++){z=0;for(var e=f*p;e<o;e++){z=Math.max(z,v.data[e].text.split("\n").length)}v.columnheight[f]=z;k+=z}u=v.push(v.W,u+v.get("hpadding")+v.get("signwidth")*p+(p-1)*v.get("legend_space"));if(u>v.get("maxwidth")){var l=Math.floor(v.get("fontsize")*(v.get("maxwidth")/u));if(!(l<10&&p==1)){if(l>9){v.push("fontStyle",a.getFont(v.get("fontweight"),v.push("fontsize",l),v.get("font")))}else{if(p>1){v.push("row",Math.ceil(o/v.push("column",p-1)))}}v.doLayout(v,m);return}}var n,t,s,q;v.width=u;v.height=k=v.push(v.H,k*v.get("line_height")+v.get("vpadding"));if(v.get("valign")==v.O){v.y=m.get("t_originy")}else{if(v.get("valign")==v.B){v.y=m.get("b_originy")-k}else{v.y=m.get("centery")-k/2}}if(v.get("align")==v.L){v.x=m.get("l_originx")}else{if(v.get("align")==v.C){v.x=m.get("centerx")-u/2}else{v.x=m.get("r_originx")-u}}v.x=v.push(v.X,(v.x<0?m.get("l_originx"):v.x)+v.get("offsetx"));v.y=v.push(v.Y,(v.y<0?m.get("t_originy"):v.y)+v.get("offsety"));s=v.y+v.get("padding_top");A=v.get("legend_space")+v.get("signwidth");for(var f=0;f<b;f++){t=v.x+v.get("padding_left");q=(v.columnheight[f]/2)*v.get("line_height");s+=q;for(var e=0;e<p&&f*p+e<o;e++){n=v.data[f*p+e];n.y=s;n.x=t;t+=v.columnwidth[e]+A}s+=q}},doConfig:function(){a.Legend.superclass.doConfig.call(this);var d=this._(),f=d.root,i=a.isNumber(d.get("column")),e=a.isNumber(d.get("row")),b=d.data.length;if(d.get("align")==d.C&&d.get("valign")=="middle"){d.push("valign",d.O)}if(f.get("align")==d.L){if(d.get("valign")=="middle"){d.push("align",d.R)}}d.data.each(function(g,c){a.merge(g,d.fireEvent(d,"parse",[d,g.name,c]));g.text=g.text||g.name||"";g.sign=g.sign||d.get("sign")},d);if(!i&&!e){i=d.push("column",1)}if(i&&!e){e=d.push("row",Math.ceil(b/d.get("column")))}if(!i&&e){i=d.push("column",Math.ceil(b/d.get("row")))}i=d.get("column");e=d.get("row");if(b>e*i){e+=Math.ceil((b-e*i)/i);e=d.push("row",e)}d.columnwidth=[];d.columnheight=[];d.doLayout(d,f)}});a.Label=a.extend(a.Component,{configure:function(){a.Label.superclass.configure.apply(this,arguments);this.type="label";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:false});this.atomic=true;this.registerEvent()},isEventValid:function(c,b){return{valid:a.inRange(b.labelx,b.labelx+b.get(b.W),c.x)&&a.inRange(b.labely,b.labely+b.get(b.H),c.y)}},text:function(b){if(b){this.push("text",b)}this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(d){var e=d.get("quadrantd"),f=d.get("line_points"),c=d.get("smooth"),e=(e>=1&&e<=2),b=d.get("labelx"),g=d.get("labely");d.labelx=b+(e?-d.get(d.W)-c:c);d.labely=g-d.get(d.H)/2;f[2]={x:b,y:g};f[3]={x:f[2].x+(e?-c:c),y:f[2].y}},doLayout:function(b,e,d,c){c.push("labelx",c.get("labelx")+b/d);c.push("labely",c.get("labely")+e/d);c.get("line_points").each(function(g,f){g.x+=b;g.y+=e;return f==1},c);c.localizer(c)},doDraw:function(d){var f=d.get("line_points"),e=d.get("sign_size"),c=d.labelx+d.get("padding_left"),g=d.labely+d.get("padding_top");d.T.label(f,d.get("line_thickness"),d.get("border.color"));d.T.box(d.labelx,d.labely,d.get(d.W),d.get(d.H),d.get("border"),d.get("f_color"),false,d.get("shadow"));d.T.textStyle(d.L,d.O,d.get("fontStyle"));var b=d.get("color");if(d.get("text_with_sign_color")){b=d.get("scolor")}if(d.get("sign")=="square"){d.T.box(c,g,e,e,0,d.get("scolor"))}else{if(d.get("sign")){d.T.round(c+e/2,g+e/2,e/2,d.get("scolor"))}}d.T.fillText(d.get("text"),c+e+d.get("sign_space"),g,d.get("textwidth"),b)},doConfig:function(){a.Label.superclass.doConfig.call(this);var b=this._();b.T.textFont(b.get("fontStyle"));if(b.get("fontsize")>b.get("line_height")){b.push("line_height",b.get("fontsize"))}if(!b.get("sign")){b.push("sign_size",0);b.push("sign_space",0)}b.push(b.H,b.get("line_height")+b.get("vpadding"));b.text();b.localizer(b)}});a.Text=a.extend(a.Component,{configure:function(){a.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:false},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(b){if(b.get("box_feature")){b.T.box(b.x,b.y,b.get(b.W),b.get(b.H),b.get("border"),b.get("f_color"))}b.T.text(b.get("text"),b.get("textx"),b.get("texty"),b.get(b.W)-b.get("hpadding"),b.get("color"),b.get("textAlign"),b.get("textBaseline"),b.get("fontStyle"),b.get("writingmode"),b.get("line_height"),b.get("shadow"),b.get("rotate"))},isEventValid:function(){return{valid:false}},doLayout:function(b,e,d,c){c.x=c.push(c.X,c.x+b);c.y=c.push(c.Y,c.y+e);c.push("textx",c.get("textx")+b);c.push("texty",c.get("texty")+e)},doConfig:function(){a.Text.superclass.doConfig.call(this);var e=this._(),b=e.x,g=e.y+e.get("padding_top"),d=e.get(e.W),f=e.get(e.H),c=e.get("textAlign");b+=(c==e.C?d/2:(c==e.R?d-e.get("padding_right"):e.get("padding_left")));if(f){g+=f/2;e.push("textBaseline","middle")}e.push("textx",b);e.push("texty",g);e.push("box_feature",d&&f);e.applyGradient()}});(function(g){var r=Math.PI,c=r/90,o=c/2,p=Math.ceil,i=Math.floor,m=2*r,k=Math.max,f=Math.min,j=Math.sin,n=Math.cos,b=function(s,t){return s==1?(i(t)+0.5):Math.round(t)},l=function(w,G,z,v){var E=G.x,C=G.y,A=w[z-1],H=w[z+1],F,D,u,t;if(z<w.length-1){var s=A.y,I=H.y,B;F=(v*E+A.x)/(v+1);D=(v*C+s)/(v+1);u=(v*E+H.x)/(v+1);t=(v*C+I)/(v+1);B=((t-D)*(u-E))/(u-F)+C-t;D+=B;t+=B;if(D>s&&D>C){D=k(s,C);t=2*C-D}else{if(D<s&&D<C){D=f(s,C);t=2*C-D}}if(t>I&&t>C){t=k(I,C);D=2*C-t}else{if(t<I&&t<C){t=f(I,C);D=2*C-t}}G.rcx=u;G.rcy=t}return[A.rcx||A.x,A.rcy||A.y,F||E,D||C,E,C]},q=function(s){return g.isNumber(s)?s:g.parseFloat(s,s)},e=function(A,C){var y,u=0,t,D=0,F=false,x=C.get("labels");C.data=A;if(C.dataType=="simple"){C.total=0;A.each(function(J,I){J.background_color=J.color;u=J.value||0;if(g.isArray(u)){var H=0;D=u.length>D?u.length:D;for(var G=0;G<u.length;G++){u[G]=q(u[G]);H+=u[G];if(!F){y=t=u[G];F=true}y=k(u[G],y);t=f(u[G],t)}J.total=H}else{u=q(u);J.value=u;C.total+=u;if(!F){y=t=u;F=true}y=k(u,y);t=f(u,t)}},C);if(g.isArray(x)){D=x.length>D?x.length:D}C.push("maxItemSize",D)}else{if(C.dataType=="stacked"||C.dataType=="complex"){var z=x.length,E,v,s,B=C.dataType=="stacked";if(z==0){z=A[0].value.length;for(var w=0;w<z;w++){x.push("")}}C.columns=[];for(var w=0;w<z;w++){E=[],v=0;A.each(function(H,G){u=H.value[w];if(!u){return}H.value[w]=u=q(u,u);v+=u;if(B){s=A[G].color}else{s=H.color;if(!F){y=t=u;F=true}y=k(u,y);t=f(u,t)}E.push(g.applyIf({name:H.name,value:H.value[w],background_color:s,color:s},g.isArray(H.extra)?(H.extra[w]||{}):H))});if(B){if(!F){y=t=u;F=true}y=k(v,y);t=f(v,t)}C.columns.push({total:v,name:x[w],item:E})}}}C.push("minValue",t);C.push("maxValue",y);C.doConfig();C.initialization=true};function d(s){if(typeof s==="string"){s=g(s)}if(!s||!s["tagName"]||s["tagName"].toLowerCase()!="canvas"){throw new Error("there not a canvas element")}this.canvas=s;this.c=this.canvas.getContext("2d")}d.prototype={getContext:function(){return this.c},css:function(t,u){if(g.isDefined(u)){this.canvas.style[t]=u}else{return this.canvas.style[t]}},ellipse:function(F,C,E,D,J,z,A,t,w,v,G,I,B,H){var u=J,B=!!B;this.save().gCo(H).strokeStyle(t,w,v).shadowOn(G).fillStyle(A).moveTo(F,C).beginPath();if(B){this.moveTo(F,C)}while(u<=z){this.lineTo(F+E*n(u),C+(D*j(u)));u+=c}return this.lineTo(F+E*n(z),C+(D*j(z))).closePath().stroke(t).fill(A).restore()},arc:function(E,C,t,u,I,w,z,D,B,v,F,H,A,G){if(D){t-=i(B/2)}if(t<=0){return this}this.save().gCo(G).strokeStyle(D,B,v).fillStyle(z).beginPath();if(u){this.moveTo(E+n(I)*(t-u),C+j(I)*(t-u)).lineTo(E+n(I)*t,C+j(I)*t);this.c.arc(E,C,t,I,w,H);this.lineTo(E+n(w)*(t-u),C+j(w)*(t-u));this.c.arc(E,C,t-u,w,I,!H)}else{this.c.arc(E,C,t,I,w,H);if(A){this.lineTo(E,C)}}this.closePath();if(!D){this.shadowOn(F).fill(z)}else{this.shadowOn(F).stroke(D).shadowOff().fill(z)}return this.restore()},sector:function(F,D,t,u,I,A,B,E,C,z,G,H,w,v){if(G){this.arc(F,D,t,u,I,A,B,E,C,z,G,H,!w,!v)}return this.arc(F,D,t,u,I,A,B,E,C,z,false,H,!w)},sector3D:function(){var v,w,t=function(H,E,G,F,J,B,I,A,C){var D=function(y,K){this.lineTo(H+G*n(y),E+(K||0)+(F*j(y)))},z=J;this.fillStyle(g.dark(C)).moveTo(H+G*n(J),E+(F*j(J))).beginPath();while(z<=B){D.call(this,z);z=z+c}D.call(this,B);this.lineTo(H+G*n(B),(E+A)+(F*j(B)));z=B;while(z>=J){D.call(this,z,A);z=z-c}D.call(this,J,A);this.lineTo(H+G*n(J),E+(F*j(J))).closePath().fill(true)},s=function(H,E,G,F,J,C,B,D){var z=H+G*n(B);var I=E+C+(F*j(B));this.moveTo(H,E).beginPath().fillStyle(D).lineTo(H,E+C).lineTo(z,I).lineTo(z,I-C).lineTo(H,E).closePath().fill(true)},x=function(H,E,G,F,J,C,I,z,D){var B=g.quadrantd(J),A=g.quadrantd(C);D=g.dark(D);if(B==1||B==2){s.call(this,H,E,G,F,I,z,J,D)}if(A==0||A==3){s.call(this,H,E,G,F,I,z,C,D)}};var u=function(J,G,I,H,M,D,B,F,z,C,A,K,L,E){this.ellipse(J,G+B,I,H,M,D,F,z,C,A,K,L,true);x.call(this,J,G,I,H,M,D,L,B,F);this.ellipse(J,G,I,H,M,D,F,z,C,A,false,L,true);t.call(this,J,G,I,H,M,D,L,B,F);return this};u.layerPaint=x;u.sPaint=t;u.layerDraw=s;return u}(),textStyle:function(t,s,u){return this.textAlign(t).textBaseline(s).textFont(u)},strokeStyle:function(s,t,v,u){if(s){if(t){this.c.lineWidth=t}if(v){this.c.strokeStyle=v}if(u){this.c.lineJoin=u}}return this},globalAlpha:function(s){if(s){this.c.globalAlpha=s}return this},fillStyle:function(s){if(s){this.c.fillStyle=s}return this},arc2:function(t,A,v,u,w,z){if(v){this.c.arc(t,A,v,u,w,z)}return this},textAlign:function(s){if(s){this.c.textAlign=s}return this},textBaseline:function(s){if(s){this.c.textBaseline=s}return this},textFont:function(s){if(s){this.c.font=s}return this},shadowOn:function(t){if(t){this.c.shadowColor=t.color;this.c.shadowBlur=t.blur;this.c.shadowOffsetX=t.offsetx;this.c.shadowOffsetY=t.offsety}return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(C,B,E,v,A,u,s){u=u.toLowerCase();var t=C,D=B,z=!u.indexOf("linear");u=u.substring(14);if(z){switch(u){case"updown":D+=v;break;case"downup":B+=v;break;case"leftright":t+=E;break;case"rightleft":C+=E;break;default:return A[0]}return this.avgLinearGradient(C,B,t,D,A)}else{C+=E/2;B+=v/2;return this.avgRadialGradient(C,B,(s||0),C,B,(E>v?v:E),u=="outin"?A.reverse():A)}},avgLinearGradient:function(s,u,w,x,y){var v=this.createLinearGradient(s,u,w,x);for(var t=0;t<y.length;t++){v.addColorStop(t/(y.length-1),y[t])}return v},createLinearGradient:function(s,t,u,v){return this.c.createLinearGradient(s,t,u,v)},avgRadialGradient:function(s,z,t,y,v,A,x){var w=this.createRadialGradient(s,z,t,y,v,A);for(var u=0;u<x.length;u++){w.addColorStop(u/(x.length-1),x[u])}return w},createRadialGradient:function(t,v,s,w,x,u){return this.c.createRadialGradient(t,v,s,w,x,u)},text:function(F,D,B,C,u,A,G,s,z,v,E,w){return this.save().textStyle(A,G,s).fillText(F,D,B,C,u,z,v,E,w).restore()},fillText:function(E,C,A,B,u,z,v,D,w){E=E.toString();if(!E||!E.length){return this}B=B||false;z=z||"lr";v=v||16;C=b(0,C);A=b(0,A);var s=E.split(z=="tb"?"":"\n");if(s.length>1){if(this.c.textBaseline=="middle"){A=A-(s.length-1)*v/2}else{if(this.c.textBaseline=="bottom"){A=A-(s.length-1)*v}}}this.save().fillStyle(u).translate(C,A).rotate(o*w).shadowOn(D);s.each(function(y,x){try{if(B&&B>0){this.c.fillText(y,0,x*v,B)}else{this.c.fillText(y,0,x*v)}}catch(F){console.log(F.message+"["+y+","+C+","+A+"]")}},this);return this.restore()},measureText:function(u){u=u.split("\n");var s=0;u.each(function(t){s=k(this.measureText(t).width,s)},this.c);return s},moveTo:function(s,t){s=s||0;t=t||0;this.c.moveTo(s,t);return this},lineTo:function(s,t){s=s||0;t=t||0;this.c.lineTo(s,t);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(t){if(t){this.c.stroke()}return this},fill:function(s){if(s){this.c.fill()}return this},cube:function(F,C,u,E,t,H,v,w,B,A,z,G){F=b(A,F);C=b(A,C);v=(v&&v>0)?v:t;var s=F+v*u,D=C-v*E;s=b(A,s);D=b(A,D);if(G){this.polygon(w,B,A,z,G,false,[{x:F,y:C},{x:s,y:D},{x:s+t,y:D},{x:F+t,y:C}]);this.polygon(w,B,A,z,G,false,[{x:F,y:C},{x:F,y:C+H},{x:F+t,y:C+H},{x:F+t,y:C}]);this.polygon(w,B,A,z,G,false,[{x:F+t,y:C},{x:s+t,y:D},{x:s+t,y:D+H},{x:F+t,y:C+H}])}this.polygon(g.dark(w),B,A,z,false,false,[{x:F,y:C},{x:s,y:D},{x:s+t,y:D},{x:F+t,y:C}]);this.polygon(w,B,A,z,false,false,[{x:F,y:C},{x:F,y:C+H},{x:F+t,y:C+H},{x:F+t,y:C}]);this.polygon(g.dark(w),B,A,z,false,false,[{x:F+t,y:C},{x:s+t,y:D},{x:s+t,y:D+H},{x:F+t,y:C+H}]);return this},cube3D:function(G,F,v,u,t,H,z,s,E,D,B,I){G=b(D,G);F=b(D,F);s=(!s||s==0)?H:s;if(t){var A=g.vectorP2P(v,u);v=G+s*A.x,u=F-s*A.y}else{v=G+s*v,u=F-s*u}while(I.length<6){I.push(false)}v=b(D,v);u=b(D,u);var C=[];if(u<0){if(g.isObject(I[4])){C.push(g.applyIf({points:[{x:G,y:F-z},{x:v,y:u-z},{x:v+H,y:u-z},{x:G+H,y:F-z}]},I[4]))}}else{if(g.isObject(I[0])){C.push(g.applyIf({points:[{x:G,y:F},{x:v,y:u},{x:v+H,y:u},{x:G+H,y:F}]},I[0]))}}if(g.isObject(I[1])){C.push(g.applyIf({points:[{x:v,y:u},{x:v,y:u-z},{x:v+H,y:u-z},{x:v+H,y:u}]},I[1]))}if(g.isObject(I[2])){C.push(g.applyIf({points:[{x:G,y:F},{x:G,y:F-z},{x:v,y:u-z},{x:v,y:u}]},I[2]))}if(g.isObject(I[3])){C.push(g.applyIf({points:[{x:G+H,y:F},{x:G+H,y:F-z},{x:v+H,y:u-z},{x:v+H,y:u}]},I[3]))}if(u<0){if(g.isObject(I[0])){C.push(g.applyIf({points:[{x:G,y:F},{x:v,y:u},{x:v+H,y:u},{x:G+H,y:F}]},I[0]))}}else{if(g.isObject(I[4])){C.push(g.applyIf({points:[{x:G,y:F-z},{x:v,y:u-z},{x:v+H,y:u-z},{x:G+H,y:F-z}]},I[4]))}}if(g.isObject(I[5])){C.push(g.applyIf({points:[{x:G,y:F},{x:G,y:F-z},{x:G+H,y:F-z},{x:G+H,y:F}]},I[5]))}C.each(function(w){this.polygon(w.color,E,D,B,w.shadow,w.alpha,w.points)},this);return this},polygon:function(y,B,A,z,C,w,t,s,u,v){this.save().strokeStyle(B,A,z).beginPath().fillStyle(y).globalAlpha(w).shadowOn(C).moveTo(t[0].x,t[0].y);if(s){this.moveTo(b(A,v[0].x),b(A,v[0].y)).lineTo(b(A,t[0].x),b(A,t[0].y));for(var x=1;x<t.length;x++){this.bezierCurveTo(l(t,t[x],x,u))}this.lineTo(b(A,v[1].x),b(A,v[1].y))}else{for(var x=1;x<t.length;x++){this.lineTo(b(A,t[x].x),b(A,t[x].y))}}return this.closePath().stroke(B).fill(y).restore()},lines:function(v,s,x,u){if(!s){return this}this.save().gCo(u).beginPath().strokeStyle(true,s,x).moveTo(b(s,v[0]),b(s,v[1]));for(var t=2;t<v.length-1;t+=2){this.lineTo(b(s,v[t]),b(s,v[t+1]))}return this.stroke(true).restore()},bezierCurveTo:function(s){this.c.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);return this},label:function(t,s,u){return this.save().beginPath().strokeStyle(true,s,u).moveTo(b(s,t[0].x),b(s,t[0].y)).bezierCurveTo([t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]).stroke(true).restore()},lineArray:function(v,t,y,s,x){if(!t){return this}this.save().beginPath().strokeStyle(true,t,y).moveTo(b(t,v[0].x),b(t,v[0].y));for(var u=1;u<v.length;u++){if(s){this.bezierCurveTo(l(v,v[u],u,x||1.5))}else{this.lineTo(b(t,v[u].x),b(t,v[u].y))}}return this.stroke(true).restore()},dotted:function(u,G,s,F,H,D,E,B,I){if(!H){return this}u=b(H,u);G=b(H,G);s=b(H,s);F=b(H,F);var C=g.distanceP2P(u,G,s,F),J;if(E<=0||C<=E||(u!=s&&G!=F)){return this.line(u,G,s,F,H,D,I)}if(u>s||G>F){J=u;u=s;s=J;J=G;G=F;F=J}this.save().gCo(I).strokeStyle(true,H,D).beginPath().moveTo(u,G);var x=E*(B||1),A=i(C/(E+x)),v=(C-A*(E+x))>E,z=(G==F);A=v?A+1:A;for(var y=1;y<=A;y++){this.lineTo(z?u+E*y+x*(y-1):u,z?G:G+E*y+x*(y-1)).moveTo(z?u+(E+x)*y:u,z?G:G+(E+x)*y)}if(!v){this.lineTo(s,F)}return this.stroke(true).restore()},line:function(u,x,t,v,s,z,y){if(!s){return this}this.save().gCo(y);return this.beginPath().strokeStyle(true,s,z).moveTo(b(s,u),b(s,x)).lineTo(b(s,t),b(s,v)).stroke(true).restore()},round:function(s,z,t,w,v,u){return this.arc(s,z,t,0,0,m,w,!!u,v,u)},round0:function(t,s,w,v,u){return this.arc(t.x,t.y,s,0,0,m,w,!!u,v,u)},fillRect:function(s,v,t,u){this.c.fillRect(s,v,t,u);return this},translate:function(s,t){this.c.translate(s,t);return this},rotate:function(s){this.c.rotate(s);return this},clearRect:function(s,v,t,u){s=s||0;v=v||0;t=t||this.canvas.width;u=u||this.canvas.height;this.c.clearRect(s,v,t,u);return this},gCo:function(s){if(s){return this.gCO(s)}return this},gCO:function(s){this.c.globalCompositeOperation=s?"destination-over":"source-over";return this},box:function(E,C,F,z,D,v,H,t,G){D=D||{enable:0};if(D.enable){var u=D.width,B=D.color,s=D.radius,A=g.isNumber(u);u=g.parsePadding(u);if(u[0]==u[1]&&u[1]==u[2]&&u[2]==u[3]){A=true}t=t?1:-1;F+=t*(u[1]+u[3])/2;z+=t*(u[0]+u[2])/2;E-=t*(u[3]/2);C-=t*(u[0]/2);u=A?u[0]:u;s=(!A||!s||s==0||s=="0")?0:g.parsePadding(s)}this.save().gCo(G).fillStyle(v).strokeStyle(A,u,B);if(s){this.beginPath().moveTo(b(u,E+s[0]),b(u,C)).lineTo(b(u,E+F-s[1]),b(u,C)).arc2(b(u,E+F-s[1]),b(u,C+s[1]),s[1],r*3/2,m).lineTo(b(u,E+F),b(u,C+z-s[2])).arc2(b(u,E+F-s[2]),b(u,C+z-s[2]),s[2],0,r/2).lineTo(b(u,E+s[3]),b(u,C+z)).arc2(b(u,E+s[3]),b(u,C+z-s[3]),s[3],r/2,r).lineTo(b(u,E),b(u,C+s[0])).arc2(b(u,E+s[0]),b(u,C+s[0]),s[0],r,r*3/2).closePath().shadowOn(H).stroke(u).shadowOff().fill(v)}else{if(!D.enable||A){if(u&&D.enable){this.shadowOn(H).c.strokeRect(E,C,F,z);this.shadowOff()}if(v){this.fillRect(E,C,F,z)}}else{if(u){B=g.isArray(B)?B:[B,B,B,B];this.shadowOn(H).line(E+F,C+u[0]/2,E+F,C+z-u[0]/2,u[1],B[1],0).line(E,C+u[0]/2,E,C+z-u[0]/2,u[3],B[3],0).line(i(E-u[3]/2),C,E+F+u[1]/2,C,u[0],B[0],0).line(i(E-u[3]/2),C+z,E+F+u[1]/2,C+z,u[2],B[2],0).shadowOff()}if(v){this.beginPath().moveTo(i(E+u[3]/2),i(C+u[0]/2)).lineTo(p(E+F-u[1]/2),C+u[0]/2).lineTo(p(E+F-u[1]/2),p(C+z-u[2]/2)).lineTo(i(E+u[3]/2),p(C+z-u[2]/2)).lineTo(i(E+u[3]/2),i(C+u[0]/2)).closePath().fill(v)}}}return this.restore()},toDataURL:function(s){return this.canvas.toDataURL(s||"image/png")},addEvent:function(u,t,s){g.Event.addEvent(this.canvas,u,t,s)}};g.taylor={light:function(s,t){t.highlight=false;s.on("mouseover",function(){t.highlight=true;s.redraw("mouseover")}).on("mouseout",function(){t.highlight=false;s.redraw("mouseout")}).on("beforedraw",function(){s.push("f_color",t.highlight?s.get("light_color"):s.get("f_color_"));return true})}};g.Chart=g.extend(g.Painter,{configure:function(){g.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({id:"",render:"",data:[],width:undefined,height:undefined,lineJoin:"round",align:"center",default_mouseover_css:true,turn_off_touchmove:false,showpercent:false,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:false,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1000,z_index:999,legend:{enable:false},tip:{enable:false}});this.registerEvent("beforeAnimation","afterAnimation","resize","animating");this.T=null;this.Rendered=false;this.Combination=false;this.Animationed=false;this.show=false;this.data=[];this.plugins=[];this.components=[];this.oneways=[];this.total=0;this.ICHARTJS_CHART=true},toDataURL:function(s){return this.T.toDataURL(s)},segmentRect:function(){if(!this.Combination){this.T.clearRect()}},resetCanvas:function(){if(!this.Combination){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,true)}},animation:function(s){s.segmentRect();if(s.coo&&!s.ILLUSIVE_COO){s.coo.draw()}s.doAnimation(s.variable.animation.time,s.duration,s);s.plugins.each(function(t){if(t.A_draw){t.variable.animation.animating=true;t.variable.animation.time=s.variable.animation.time;t.draw();t.variable.animation.animating=false}});if(s.Combination){return}s.oneways.each(function(t){t.draw()});if(s.variable.animation.time<s.duration){s.variable.animation.time++;g.requestAnimFrame(function(){s.animation(s)})}else{g.requestAnimFrame(function(){s.Animationed=true;s.plugins.each(function(t){t.Animationed=true});s.processAnimation=false;s.draw();s.plugins.each(function(t){t.processAnimation=false});s.fireEvent(s,"afterAnimation",[s])})}},runAnimation:function(s){s.fireEvent(s,"beforeAnimation",[s]);if(!s.A_draw){s.variable.animation={type:0,time:0,queue:[]}}s.processAnimation=true;s.animation(s)},doSort:function(){var s=function(u,t){return(g.isArray(u)?(u.zIndex||0):u.get("z_index"))>(g.isArray(t)?(t.zIndex||0):t.get("z_index"))};this.components.sor(s);this.oneways.sor(s)},commonDraw:function(s,t){s.show=false;if(!s.redraw){g.Assert.isTrue(s.Rendered,s.type+" has not rendered");g.Assert.isTrue(s.data&&s.data.length>0,s.type+"'s data is empty");g.Assert.isTrue(s.initialization,s.type+" Failed to initialize");s.doSort()}s.redraw=true;if(!s.Animationed&&s.get("animation")){s.runAnimation(s);return}s.segmentRect();s.components.eachAll(function(u){u.draw(t)});s.components.eachAll(function(u){if(u.last){u.last(u)}});s.oneways.each(function(u){u.draw()});s.show=true},plugin:function(t){var s=this._();t.inject(s);if(t.ICHARTJS_CHART){t.Combination=true;t.setUp()}if(!s.get("animation")){t.push("animation",false)}t.duration=s.duration;s.register(t);s.plugins.push(t)},destroy:function(s){s.components.eachAll(function(t){t.destroy()});s.oneways.each(function(t){t.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(t,v){if(t.get("fit")){var s=window.innerWidth,y=window.innerHeight,x=g.getDoc().body.style;x.padding="0px";x.margin="0px";x.overflow="hidden";t.push(t.W,s);t.push(t.H,y)}t.canvasid=g.uid(t.type);t.shellid="shell-"+t.canvasid;var u=[];u.push("<div id='");u.push(t.shellid);u.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>");u.push("<canvas id= '");u.push(t.canvasid);u.push("' style='-webkit-text-size-adjust: none;'>");u.push("<p>Your browser does not support the canvas element</p></canvas>");u.push("</div>");v.innerHTML=u.join("");t.shell=g(t.shellid);t.T=t.target=new d(t.canvasid);t.size(t);t.Rendered=true},setUp:function(){var s=this._();s.redraw=false;s.T.clearRect();s.initialization=false;s.initialize()},load:function(t){var s=this._();s.push("data",t||[]);s.setUp();(s.Combination?s.root:s).draw()},resize:function(s,u){s=g.parseFloat(s);u=g.parseFloat(u);var t=this._();if(!t.Combination){t.width=t.push(t.W,s);t.height=t.push(t.H,u);t.size(t)}t.set(t.fireEvent(t,"resize",[s,u]));t.setUp();t.plugins.eachAll(function(v){if(v.Combination){v.resize(s,u)}});if(!t.Combination){t.draw()}},size:function(s){s.T.canvas.width=s.width=s.pushIf(s.W,400);s.T.canvas.height=s.height=s.pushIf(s.H,300);s.shell.style.width=s.width+"px";s.shell.style.height=s.height+"px"},initialize:function(){var s=this._(),u=s.get("data"),t=s.get("render");s.push(s.X,null);s.push(s.Y,null);if(s.Combination){g.apply(s.options,g.clone([s.W,s.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],s.root.options,true));s.width=s.get(s.W);s.height=s.get(s.H);s.shell=s.root.shell;s.Rendered=true}else{if(!s.Rendered){if(t){s.create(s,g(t))}}}if(s.Rendered&&!s.initialization){if(u&&u.length>0){e.call(s,u,s)}else{if(g.isString(s.get("url"))){s.ajax.call(s,s.get("url"),function(v){s.push("data",v);s.initialize();s.draw()})}}}},eventOff:function(){this.stopEvent=true},eventOn:function(){this.stopEvent=false},oneWay:function(s){s.T.strokeStyle(true,0,s.get("strokeStyle"),s.get("lineJoin"));s.processAnimation=s.get("animation");if(g.isFunction(s.get("doAnimation"))){s.doAnimation=s.get("doAnimation")}s.animationArithmetic=g.getAA(s.get("animation_timing_function"));var y=s.variable.event,w=s.Combination,v=!s.get("turn_off_touchmove")&&!w,u=!g.touch&&s.get("default_mouseover_css")&&!w,z,x,t=g.touch?["touchstart","touchmove"]:["click","mousemove"];s.stopEvent=false;s.A_draw=w&&s.processAnimation;g.register(s);if(!w){t.each(function(A){s.T.addEvent(A,function(B){if(s.processAnimation||s.stopEvent){return}if(B.targetTouches&&B.targetTouches.length!=1){return}s.fireEvent(s,A,[s,g.Event.fix(B)])},false)})}s.on(t[0],function(A,B){A.components.eachAll(function(D){if(D.ICHARTJS_CHART){if(D.fireEvent(D,t[0],[D,B])){y.click=true;return false}}else{var E=D.isMouseOver(B);if(E.valid){y.click=true;D.fireEvent(D,"click",[D,B,E]);return !B.stopPropagation}}});if(y.click){if(v){B.event.preventDefault()}y.click=false;return true}});if(!g.touch||v){s.on(t[1],function(A,B){z=x=false;A.components.eachAll(function(E){if(E.ICHARTJS_CHART){if(E.fireEvent(E,t[1],[E,B])){z=true;return false}}else{var D=E.variable.event,F=E.isMouseOver(B);if(F.valid){z=z||E.atomic;if(!D.mouseover){D.mouseover=true;E.fireEvent(E,"mouseover",[E,B,F])}E.fireEvent(E,"mousemove",[E,B,F]);if(F.stop){return false}}else{if(D.mouseover){D.mouseover=false;E.fireEvent(E,"mouseout",[E,B,F])}}return !B.stopPropagation}});if(y.mouseover){B.event.preventDefault();if(!z){y.mouseover=false;A.fireEvent(A,"mouseout",[A,B])}return y.mouseover}else{if(z){y.mouseover=z;A.fireEvent(A,"mouseover",[A,B])}}});if(u){s.on("mouseover",function(){s.T.css("cursor","pointer")}).on("mouseout",function(){s.T.css("cursor","default")})}}g.applyIf(s.get("sub_option"),g.clone(["shadow","tip"],s.options,true));if(!s.Combination){s.bg=new g.Custom({z_index:-1,drawFn:function(){s.T.box(0,0,s.width,s.height,s.get("border"),s.get("f_color"),0,0,true)}});s.duration=p(s.get("animation_duration")*g.FRAME/1000)}s.oneWay=g.emptyFn},originXY:function(u,t,v){var s=u.get("align");if(s==u.L){u.pushIf(u.X,t[0])}else{if(s==u.R){u.pushIf(u.X,t[1])}else{u.pushIf(u.X,t[2])}}u.x=u.push(u.X,u.get(u.X)+u.get("offsetx"));u.y=u.push(u.Y,v[0]+u.get("offsety"));return{x:u.x,y:u.y}},getPercent:function(s,t){return this.get("showpercent")?(s/(t||this.total||1)*100).toFixed(this.get("decimalsnum"))+"%":s},doActing:function(u,A,z,x,w){var y=!!u.get("communal_acting"),s=u.getPercent(A.value,A.total);u.push(y?"sub_option":"communal_acting",g.clone(u.get(y?"communal_acting":"sub_option"),true));g.merge(u.get("sub_option"),A);g.merge(u.get("sub_option"),z);u.push("sub_option.value",s);u.push("sub_option.value_",A.value);if(u.get("sub_option.tip.enable")){u.push("sub_option.tip.text",w||(A.name+" "+s));u.push("sub_option.tip.name",A.name);u.push("sub_option.tip.index",x);u.push("sub_option.tip.value",A.value);u.push("sub_option.tip.total",A.total||u.total)}},register:function(s){s.id=g.uid(s.type);this.components.push(s);return s},remove:function(s,t){if(t){s.components.each(function(v,u){if(t.id==v.id){s.components.splice(u,1);return false}})}},doConfig:function(){g.Chart.superclass.doConfig.call(this);var x=this._();x.destroy(x);x.oneways.length=0;x.oneWay(x);x.push("communal_acting",0);if(!x.Combination){x.oneways.push(x.bg);x.push("r_originx",x.width-x.get("padding_right"));x.push("b_originy",x.height-x.get("padding_bottom"));x.applyGradient();if(g.isString(x.get("title"))){x.push("title",g.applyIf({text:x.get("title")},x.default_.title))}if(g.isString(x.get("subtitle"))){x.push("subtitle",g.applyIf({text:x.get("subtitle")},x.default_.subtitle))}if(g.isString(x.get("footnote"))){x.push("footnote",g.applyIf({text:x.get("footnote")},x.default_.footnote))}var z=0,u=x.push("l_originx",x.get("padding_left")),y=x.push("t_originy",x.get("padding_top")),s=x.push("client_width",(x.width-x.get("hpadding"))),A;if(x.get("title.text")!=""){var v=x.get("subtitle.text")!="";z=v?x.get("title.height")+x.get("subtitle.height"):x.get("title.height");y=x.push("t_originy",y+z);x.push("title.originx",u);x.push("title.originy",x.get("padding_top"));x.push("title.maxwidth",s);x.pushIf("title.width",s);x.title=new g.Text(x.get("title"),x);x.oneways.push(x.title);if(v){x.push("subtitle.originx",u);x.push("subtitle.originy",x.get("padding_top")+x.get("title.height"));x.pushIf("subtitle.width",s);x.push("subtitle.maxwidth",s);x.subtitle=new g.Text(x.get("subtitle"),x);x.oneways.push(x.subtitle)}}if(x.get("footnote.text")!=""){var B=x.get("footnote.height");z+=B;x.push("b_originy",x.get("b_originy")-B);x.push("footnote.originx",u);x.push("footnote.originy",x.get("b_originy"));x.push("footnote.maxwidth",s);x.pushIf("footnote.width",s);x.footnote=new g.Text(x.get("footnote"),x);x.oneways.push(x.footnote)}A=x.push("client_height",(x.get(x.H)-x.get("vpadding")-x.pushIf("other_height",z)));x.push("minDistance",f(s,A));x.push("maxDistance",k(s,A));x.push("centerx",u+s/2);x.push("centery",y+A/2)}if(x.get("legend.enable")){x.legend=new g.Legend(g.apply({maxwidth:x.get("client_width"),data:x.data},x.get("legend")),x);x.oneways.push(x.legend)}x.push("sub_option.tip.wrap",x.push("tip.wrap",x.shell))}})})(a);a.Custom=a.extend(a.Component,{configure:function(){a.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:a.emptyFn,configFn:a.emptyFn,eventValid:undefined,animating_draw:true})},doDraw:function(b){b.get("drawFn").call(b,b)},isEventValid:function(c,b){if(a.isFunction(this.get("eventValid"))){return this.get("eventValid").call(this,c,b)}return{valid:false}},doConfig:function(){a.Custom.superclass.doConfig.call(this);var b=this._();b.A_draw=b.get("animating_draw");b.variable.animation={animating:false,time:0};b.duration=0;b.get("configFn").call(b,b)}});a.Scale=a.extend(a.Component,{configure:function(){a.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:true,distance:undefined,start_scale:0,end_scale:undefined,min_scale:undefined,max_scale:undefined,scale_space:undefined,scale_share:5,scale_enable:true,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:false}},getScale:function(c){var b=[c.get("basic_value"),c.get("start_scale"),c.get("end_scale"),c.get("end_scale")-c.get("start_scale"),0];b[4]=a.inRange(b[1],b[2]+1,b[0])||a.inRange(b[2]-1,b[1],b[0]);return{range:b[4],basic:b[4]?(b[0]-b[1])/b[3]:0,start:b[4]?b[0]:b[1],end:b[2],distance:b[3]}},doDraw:function(b){if(b.get("scale_enable")){b.items.each(function(c){b.T.line(c.x0,c.y0,c.x1,c.y1,b.get("scale_size"),b.get("scale_color"),false)})}b.labels.each(function(c){c.draw()})},doLayout:function(b,d,c){if(c.get("scale_enable")){c.items.each(function(e){e.x0+=b;e.y0+=d;e.x1+=b;e.y1+=d})}c.labels.each(function(e){e.doLayout(b,d,0,e)})},doConfig:function(){a.Scale.superclass.doConfig.call(this);var F=this._(),u=Math.abs,v=F.get("labels").length,z=F.get("min_scale"),G=F.get("max_scale"),t=F.get("scale_space"),b=F.get("end_scale"),e=F.get("start_scale");F.items=[];F.labels=[];F.number=0;if(v>0){F.number=v-1}else{if(e>z){e=F.push("start_scale",a.floor(z))}if(!a.isNumber(b)||b<G){b=a.ceil(G);b=F.push("end_scale",(!b&&!e)?1:b)}if(t&&u(t)<u(b-e)){F.push("scale_share",(b-e)/t)}F.number=F.push("scale_share",u(F.get("scale_share")));if(!t||t>(b-e)){var g=((b-e)+"").indexOf(".")+1,l=1;while(g>0){g--;l*=10}t=F.push("scale",(b-e)*l/F.get("scale_share")/l)}if(parseInt(t)!=t&&F.get("decimalsnum")==0){F.push("decimalsnum",(t+"").substring((t+"").indexOf(".")+1).length)}}F.push("distanceOne",F.get("valid_distance")/F.number);var s,p,n,B=0,f=0,C=0,j=0,E=0,D=0,q=F.get("scale_width"),o=q/2,d=F.get("scaleAlign"),m=F.get("position"),c=F.get("text_space"),k="",r=F.get("coo").get("axis.width");F.push("which",F.get("which").toLowerCase());F.isH=F.get("which")=="h";if(F.isH){if(d==F.O){j=-q}else{if(d==F.C){j=-o;f=o}else{f=q}}if(m==F.O){D=-c-r[0];k=F.B}else{D=c+r[2];k=F.O}m=F.C}else{if(d==F.L){C=-q}else{if(d==F.C){C=-o;B=o}else{B=q}}k="middle";if(m==F.R){m=F.L;E=c+r[1]}else{m=F.R;E=-c-r[3]}}for(var A=0;A<=F.number;A++){s=v?F.get("labels")[A]:(t*A+e).toFixed(F.get("decimalsnum"));p=F.isH?F.get("valid_x")+A*F.get("distanceOne"):F.x;n=F.isH?F.y:F.get("valid_y")+F.get("valid_distance")-A*F.get("distanceOne");F.items.push({x:p,y:n,x0:p+C,y0:n+j,x1:p+B,y1:n+f});if(F.get("label")){F.labels.push(new a.Text(a.applyIf(a.apply(F.get("label"),a.merge({text:s,x:p,y:n,originx:p+E,originy:n+D},F.fireEvent(F,"parseText",[s,p+E,n+D,A,F.number==A]))),{textAlign:m,textBaseline:k}),F))}}}});a.Coordinate={coordinate_:function(i){var l=this._(),b=l.get("coordinate");if(b.ICHARTJS_OBJECT){l.x=l.push(l.X,b.x);l.y=l.push(l.Y,b.y);l.ILLUSIVE_COO=true;return b}var j="85%",d=a.parsePercent,c=l.get("coordinate.scale"),m=l.get("scaleAlign"),k=l.push("coordinate._width",d(l.get("coordinate.width")||j,Math.floor(l.get("client_width"))));h=l.push("coordinate._height",d(l.get("coordinate.height")||j,Math.floor(l.get("client_height")))-(l.is3D()?((l.get("coordinate.pedestal_height")||22)+(l.get("coordinate.board_deep")||20)):0));l.push("coordinate.valid_height_value",d(l.get("coordinate.valid_height"),h));l.push("coordinate.valid_width_value",d(l.get("coordinate.valid_width"),k));l.originXY(l,[l.get("l_originx"),l.get("r_originx")-k,l.get("centerx")-k/2],[l.get("centery")-h/2]);l.push("coordinate.originx",l.x);l.push("coordinate.originy",l.y);if(i){i()}if(a.isObject(c)){c=[c]}if(a.isArray(c)){var e=l.dataType!="stacked";c.each(function(f){if(l.get("percent")&&f.position==m){f=a.apply(f,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(n,g,o){return{text:n+"%"}}}})}if(!f.start_scale||(e&&f.start_scale>l.get("minValue"))){f.min_scale=l.get("minValue")}if(!f.end_scale||(e&&f.end_scale<l.get("maxValue"))){f.max_scale=l.get("maxValue")}})}else{l.push("coordinate.scale",{position:m,scaleAlign:m,max_scale:l.get("maxValue"),min_scale:l.get("minValue")})}if(l.is3D()){l.push("coordinate.xAngle_",l.get("xAngle_"));l.push("coordinate.yAngle_",l.get("yAngle_"));l.push("coordinate.zHeight",l.get("zHeight")*l.get("bottom_scale"))}l.remove(l,l.coo);return l.register(new a[l.is3D()?"Coordinate3D":"Coordinate2D"](l.get("coordinate"),l))}};a.Coordinate2D=a.extend(a.Component,{configure:function(){a.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:true,scale2grid:true,grids:undefined,ignoreOverlap:true,ignoreEdge:false,xlabel:"",ylabel:"",background_color:0,striped:true,striped_direction:"v",striped_factor:0.01,crosshair:{enable:false},z_index:-1,axis:{enable:true,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},getScale:function(f,b){var c=this._(),e;for(var d=0;d<c.scale.length;d++){if(c.scale[d].get("position")==f){return c.scale[d].getScale(c.scale[d])}}if(!b){if(f==c.L){f=c.R}else{if(f==c.R){f=c.L}else{if(f==c.O){f=c.B}else{f=c.O}}}return c.getScale(f,true)}throw new Error("there no valid scale")},isEventValid:function(c,b){return{valid:c.x>b.x&&c.x<(b.x+b.width)&&c.y<b.y+b.height&&c.y>b.y}},doDraw:function(e){e.T.box(e.x,e.y,e.width,e.height,0,e.get("f_color"));if(e.get("striped")){var b,k,i=false,g=e.get("axis.width"),j=a.dark(e.get("background_color"),e.get("striped_factor"),0)}var d=(e.get("striped_direction")=="v");e.gridlines.each(function(f,c){if(e.get("striped")){if(i){if(d){e.T.box(f.x1,f.y1+f.width,f.x2-f.x1,k-f.y1-f.width,0,j)}else{e.T.box(b+f.width,f.y2,f.x1-b,f.y1-f.y2,0,j)}}b=f.x1;k=f.y1;i=!i}}).each(function(c){if(!c.overlap){if(c.solid){e.T.line(c.x1,c.y1,c.x2,c.y2,c.width,c.color)}else{e.T.dotted(c.x1,c.y1,c.x2,c.y2,c.width,c.color,c.size,c.fator)}}});e.T.box(e.x,e.y,e.width,e.height,e.get("axis"),false,e.get("shadow"),true);e.scale.each(function(c){c.draw()})},destroy:function(){if(this.crosshair){this.crosshair.destroy()}},doCrosshair:function(b){if(b.get("crosshair.enable")&&!b.crosshair){b.push("crosshair.wrap",b.root.shell);b.push("crosshair.height",b.height);b.push("crosshair.width",b.width);b.push("crosshair.top",b.y);b.push("crosshair.left",b.x);b.crosshair=new a.CrossHair(b.get("crosshair"),b)}},doConfig:function(){a.Coordinate2D.superclass.doConfig.call(this);var K=this._();K.atomic=false;K.width=K.get("_width");K.height=K.get("_height");K.valid_width=K.get("valid_width_value");K.valid_height=K.get("valid_height_value");if(K.get("gradient")&&a.isString(K.get("f_color"))){K.push("f_color",K.T.avgLinearGradient(K.x,K.y,K.x,K.y+K.height,[K.get("dark_color"),K.get("light_color")]))}if(K.get("axis.enable")){var m=K.get("axis.width");if(!a.isArray(m)){K.push("axis.width",[m,m,m,m])}}else{K.push("axis.width",[0,0,0,0])}K.doCrosshair(K);var A,o=!!(K.get("gridlinesVisible")&&K.get("grids")),e=o&&!!K.get("grids.horizontal"),L=o&&!!K.get("grids.vertical"),C=K.height,l=K.width,u=K.valid_width,I=K.valid_height,b=K.get("gridlinesVisible")&&K.get("scale2grid")&&!(e&&L),t=K.push("x_start",K.x+(l-u)/2),H=K.push("y_start",K.y+(C-I)/2),c=K.get("axis.width");K.push("x_end",K.x+(l+u)/2);K.push("y_end",K.y+(C+I)/2);if(!a.isArray(K.get("scale"))){if(a.isObject(K.get("scale"))){K.push("scale",[K.get("scale")])}else{K.push("scale",[])}}K.get("scale").each(function(d,g){A=d["position"];A=A||K.L;A=A.toLowerCase();d[K.X]=K.x;d["coo"]=K;d[K.Y]=K.y;d["valid_x"]=t;d["valid_y"]=H;d["position"]=A;if(A==K.O){d["which"]="h";d["distance"]=l;d["valid_distance"]=u}else{if(A==K.R){d["which"]="v";d["distance"]=C;d["valid_distance"]=I;d[K.X]+=l;d["valid_x"]+=u}else{if(A==K.B){d["which"]="h";d["distance"]=l;d["valid_distance"]=u;d[K.Y]+=C;d["valid_y"]+=I}else{d["which"]="v";d["distance"]=C;d["valid_distance"]=I}}}K.scale.push(new a.Scale(d,K.root))},K);var r=K.push("ignoreOverlap",K.get("ignoreOverlap")&&K.get("axis.enable")||K.get("ignoreEdge"));if(r){if(K.get("ignoreEdge")){var f=function(g,d,i){return g=="v"?(i==K.y)||(i==K.y+C):(d==K.x)||(d==K.x+g)}}else{var f=function(g,d,i){return g=="v"?(i==K.y&&c[0]>0)||(i==(K.y+C)&&c[2]>0):(d==K.x&&c[3]>0)||(d==(K.x+l)&&c[1]>0)}}}var D={solid:true,size:10,fator:1,width:K.get("grid_line_width"),color:K.get("grid_color")},G=a.applyIf(K.get("gridHStyle"),D),z=a.applyIf(K.get("gridVStyle"),D);if(b){var J,k,j,s;K.scale.each(function(d){s=d.get("position");if(a.isFalse(d.get("scale2grid"))||e&&d.get("which")=="v"||L&&d.get("which")=="h"){return}k=j=0;if(s==K.O){j=C}else{if(s==K.R){k=-l}else{if(s==K.B){j=-C}else{k=l}}}d.items.each(function(g){if(r){K.gridlines.push(a.applyIf({overlap:f.call(K,d.get("which"),g.x,g.y),x1:g.x,y1:g.y,x2:g.x+k,y2:g.y+j},d.isH?z:G))}})})}if(L){var q=K.get("grids.vertical");a.Assert.isTrue(q["value"]>0,"vertical value");var F=l/q["value"],v=q["value"];if(q["way"]=="given_value"){v=F;F=q["value"];F=F>l?l:F}for(var B=0;B<=v;B++){if(r){K.gridlines.push(a.applyIf({overlap:f.call(K,"h",K.x+B*F,K.y),x1:K.x+B*F,y1:K.y,x2:K.x+B*F,y2:K.y+C,H:false,width:z.width,color:z.color},z))}}}if(e){var E=K.get("grids.horizontal");a.Assert.isTrue(E["value"]>0,"horizontal value");var F=C/E["value"],v=E["value"];if(E["way"]=="given_value"){v=F;F=E["value"];F=F>C?C:F}for(var B=0;B<=v;B++){if(r){K.gridlines.push(a.applyIf({overlap:f.call(K,"v",K.x,K.y+B*F),x1:K.x,y1:K.y+B*F,x2:K.x+l,y2:K.y+B*F,H:true,width:G.width,color:G.color},G))}}}}});a.Coordinate3D=a.extend(a.Coordinate2D,{configure:function(){a.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=a._3D;this.set({xAngle:60,yAngle:20,xAngle_:undefined,yAngle_:undefined,zHeight:0,pedestal_height:22,board_deep:20,left_board:true,gradient:true,color_factor:0.18,ignoreEdge:true,striped:false,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:false}})},doDraw:function(f){var d=f.width,g=f.height,j=f.get("xAngle_"),c=f.get("yAngle_"),i=f.get("zHeight"),e=f.get("z_offx"),b=f.get("z_offy");if(f.get("pedestal_height")){f.T.cube3D(f.x,f.y+g+f.get("pedestal_height"),j,c,false,d,f.get("pedestal_height"),i*3/2,f.get("axis.enable"),f.get("axis.width"),f.get("axis.color"),f.get("bottom_style"))}if(f.get("board_deep")){f.T.cube3D(f.x+e,f.y+g-b,j,c,false,d,g,f.get("board_deep"),f.get("axis.enable"),f.get("axis.width"),f.get("axis.color"),f.get("board_style"))}f.T.cube3D(f.x,f.y+g,j,c,false,d,g,i,f.get("axis.enable"),f.get("axis.width"),f.get("axis.color"),f.get("wall_style"));f.gridlines.each(function(k){if(k.solid){if(f.get("left_board")){f.T.line(k.x1,k.y1,k.x1+e,k.y1-b,k.width,k.color)}f.T.line(k.x1+e,k.y1-b,k.x2+e,k.y2-b,k.width,k.color)}else{if(f.get("left_board")){f.T.dotted(k.x1,k.y1,k.x1+e,k.y1-b,k.width,k.color,k.size,k.fator)}f.T.dotted(k.x1+e,k.y1-b,k.x2+e,k.y2-b,k.width,k.color,k.size,k.fator)}});f.scale.each(function(k){k.draw()})},doConfig:function(){a.Coordinate3D.superclass.doConfig.call(this);var g=this._(),d=g.get("wall_style"),i=g.get("background_color")||"#d6dbd2",j=g.height,c=g.width,k=g.get("color_factor"),e=g.push("z_offx",g.get("xAngle_")*g.get("zHeight")),b=g.push("z_offy",g.get("yAngle_")*g.get("zHeight"));while(d.length<6){d.push({color:i})}if(!g.get("left_board")){d[2]=false;g.scale.each(function(f){f.doLayout(e,-b,f)})}g.push("bottom_style",[{color:g.get("shadow_color"),shadow:g.get("shadow")},false,false,{color:d[3].color},false,{color:d[3].color}]);g.push("board_style",[false,false,false,{color:d[4].color},{color:d[5].color},false]);if(g.get("gradient")){if(a.isString(d[0].color)){d[0].color=g.T.avgLinearGradient(g.x,g.y+j,g.x+c,g.y+j,[a.dark(d[0].color,k/2+0.06),a.dark(d[0].color,k/2+0.06)])}if(a.isString(d[1].color)){d[1].color=g.T.avgLinearGradient(g.x+e,g.y-b,g.x+e,g.y+j-b,[a.dark(d[1].color,k),a.light(d[1].color,k)])}if(a.isString(d[2].color)){d[2].color=g.T.avgLinearGradient(g.x,g.y,g.x,g.y+j,[a.light(d[2].color,k/3),a.dark(d[2].color,k)])}g.get("bottom_style")[5].color=g.T.avgLinearGradient(g.x,g.y+j,g.x,g.y+j+g.get("pedestal_height"),[a.light(d[3].color,k/2+0.06),a.dark(d[3].color,k/2,0)])}g.push("wall_style",[d[0],d[1],d[2]])}});a.Rectangle=a.extend(a.Component,{configure:function(){a.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=true;this.registerEvent("parseText");this.label=null},last:function(b){if(b.label){b.label.draw()}},doDraw:function(b){b.drawRectangle()},doConfig:function(){a.Rectangle.superclass.doConfig.call(this);var g=this._(),f=g.variable.event,j=g.get("valueAlign");a.taylor.light(g,f);g.width=g.get(g.W);g.height=g.get(g.H);var d=g.push("centerx",g.x+g.width/2),k=g.push("centery",g.y+g.height/2),e=g.C,c="middle",i=g.get("value_space");if(j==g.L){e=g.R;d=g.x-i}else{if(j==g.R){e=g.L;d=g.x+g.width+i}else{if(j==g.B){k=g.y+g.height+i;c=g.O}else{if(j==g.O){k=g.y-i;c=g.B}}}}if(g.get("label")){g.push("label.originx",d);g.push("label.originy",k);g.push("label.text",g.push("value",g.fireString(g,"parseText",[g,g.get("value")],g.get("value"))));a.applyIf(g.get("label"),{textAlign:e,textBaseline:c,color:g.get("color")});g.label=new a.Text(g.get("label"),g)}if(g.get("tip.enable")){if(g.get("tip.showType")!="follow"){g.push("tip.invokeOffsetDynamic",false)}g.tip=new a.Tip(g.get("tip"),g)}}});a.Rectangle2D=a.extend(a.Rectangle,{configure:function(){a.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawRectangle:function(){var b=this._();b.T.box(b.get(b.X),b.get(b.Y),b.get(b.W),b.get(b.H),b.get("border"),b.get("f_color"),b.get("shadow"))},isEventValid:function(c,b){return{valid:c.x>b.x&&c.x<(b.x+b.width)&&c.y<(b.y+b.height)&&c.y>(b.y)}},tipInvoke:function(){var b=this._();return function(c,d){return{left:b.tipX(c,d),top:b.tipY(c,d)}}},doConfig:function(){a.Rectangle2D.superclass.doConfig.call(this);var b=this._(),c=b.get("tipAlign");if(c==b.L||c==b.R){b.tipY=function(d,e){return b.get("centery")-e/2}}else{b.tipX=function(d,e){return b.get("centerx")-d/2}}if(c==b.L){b.tipX=function(d,e){return b.x-b.get("value_space")-d}}else{if(c==b.R){b.tipX=function(d,e){return b.x+b.width+b.get("value_space")}}else{if(c==b.B){b.tipY=function(d,e){return b.y+b.height+3}}else{b.tipY=function(d,e){return b.y-e-3}}}}b.applyGradient()}});a.Rectangle3D=a.extend(a.Rectangle,{configure:function(){a.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=a._3D;this.set({zHeight:undefined,xAngle:60,yAngle:20,xAngle_:undefined,yAngle_:undefined,shadow_offsetx:2})},drawRectangle:function(){var b=this._();b.T.cube(b.get(b.X),b.get(b.Y),b.get("xAngle_"),b.get("yAngle_"),b.get(b.W),b.get(b.H),b.get("zHeight"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("light_color"),b.get("shadow"))},isEventValid:function(c,b){return{valid:c.x>b.x&&c.x<(b.x+b.get(b.W))&&c.y<b.y+b.get(b.H)&&c.y>b.y}},tipInvoke:function(){var b=this._();return function(c,d){return{left:b.topCenterX-c/2,top:b.topCenterY-d}}},doConfig:function(){a.Rectangle3D.superclass.doConfig.call(this);var b=this._();b.pushIf("zHeight",b.get(b.W));b.topCenterX=b.x+(b.get(b.W)+b.get(b.W)*b.get("xAngle_"))/2;b.topCenterY=b.y-b.get(b.W)*b.get("yAngle_")/2-b.get("value_space");if(b.get("valueAlign")==b.O&&b.label){b.label.push("textx",b.topCenterX);b.label.push("texty",b.topCenterY)}}});a.Sector=a.extend(a.Component,{configure:function(){a.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",ignored:false,counterclockwise:false,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:false,donutwidth:0,mutex:false,increment:undefined,label_length:undefined,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:false,label:{},rounded:false});this.atomic=true;this.registerEvent("changed","parseText");this.label=null;this.tip=null},bound:function(){if(!this.expanded){this.toggle()}},rebound:function(){if(this.expanded){this.toggle()}},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var b=this._();return{x:b.x,x:b.y,startAngle:b.get("startAngle"),middleAngle:b.get("middleAngle"),endAngle:b.get("endAngle")}},doDraw:function(b){if(!b.get("ignored")){if(b.label&&!b.get("mini_label")){b.label.draw()}b.drawSector();if(b.label&&b.get("mini_label")){b.label.draw()}}},doText:function(c,b,d){c.push("label.originx",b);c.push("label.originy",d);c.push("label.textBaseline","middle");c.label=new a.Text(c.get("label"),c)},doLabel:function(d,c,j,g,i,e,f,b){d.push("label.originx",c);d.push("label.originy",j);d.push("label.quadrantd",g);d.push("label.line_points",i);d.push("label.labelx",e);d.push("label.labely",f);d.push("label.smooth",b);d.push("label.angle",d.get("middleAngle")%(Math.PI*2));d.label=new a.Label(d.get("label"),d)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){a.Sector.superclass.doConfig.call(this);var c=this._(),b=c.variable.event,i=c.get("label"),e=c.get("bound_event"),d;if(c.get("rounded")){c.push("startAngle",0);c.push("endAngle",Math.PI*2);return}a.taylor.light(c,b);c.push("totalAngle",c.get("endAngle")-c.get("startAngle"));if(i){if(c.get("mini_label")){if((c.get("mini_label_threshold_angle")*Math.PI/180)>c.get("totalAngle")){c.push("mini_label",false)}else{a.apply(c.get("label"),c.get("mini_label"))}}c.push("label.text",c.fireString(c,"parseText",[c,c.get("label.text")],c.get("label.text")));c.pushIf("label.border.color",c.get("border.color"));c.push("label.scolor",c.get("background_color"))}c.variable.event.status=c.expanded=c.get("expand");if(c.get("tip.enable")){if(c.get("tip.showType")!="follow"){c.push("tip.invokeOffsetDynamic",false)}c.tip=new a.Tip(c.get("tip"),c)}b.poped=false;c.on(e,function(){b.poped=true;c.expanded=!c.expanded;c.redraw(e);b.poped=false});c.on("beforedraw",function(g,f){if(f==e){d=false;c.x=c.get(c.X);c.y=c.get(c.Y);if(c.expanded){if(c.get("mutex")&&!b.poped){c.expanded=false;d=true}else{c.x+=c.get("inc_x");c.y-=c.get("inc_y")}}if(b.status!=c.expanded){c.fireEvent(c,"changed",[c,c.expanded]);d=true;b.status=c.expanded}if(i&&d){c.label.doLayout(c.get("inc_x")*(c.expanded?1:-1),-c.get("inc_y")*(c.expanded?1:-1),2,c.label)}}return true})}});a.Sector2D=a.extend(a.Sector,{configure:function(){a.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(g,d){if(!d.get("ignored")){if(d.isLabel()&&d.label.isEventValid(g,d.label).valid){return{valid:true}}var f=a.distanceP2P(d.x,d.y,g.x,g.y),c=d.get("donutwidth");if(d.r<f||(c&&(d.r-c)>f)){return{valid:false}}if(a.angleInRange(d.get("startAngle"),d.get("endAngle"),a.atan2Radian(d.x,d.y,g.x,g.y))){return{valid:true}}}return{valid:false}},tipInvoke:function(){var c=this,b=c.get("middleAngle"),d=a.quadrantd(b);return function(e,f){var g=a.p2Point(c.x,c.y,b,c.r*0.8);return{left:(d>=1&&d<=2)?(g.x-e):g.x,top:d>=2?(g.y-f):g.y}}},doConfig:function(){a.Sector2D.superclass.doConfig.call(this);var d=this._();d.r=d.get("radius");if(d.get("donutwidth")>d.r){d.push("donutwidth",0)}d.applyGradient(d.x-d.r,d.y-d.r,2*d.r*0.9,2*d.r*0.9);var c=d.get("middleAngle"),b=d.pushIf("increment",a.lowTo(5,d.r/10)),i;d.push("inc_x",b*Math.cos(2*Math.PI-c));d.push("inc_y",b*Math.sin(2*Math.PI-c));b*=2;if(d.get("label")){if(d.get("mini_label")){P2=a.p2Point(d.x,d.y,c,d.get("donutwidth")?d.r-d.get("donutwidth")/2:d.r*5/8);d.doText(d,P2.x,P2.y)}else{var e=a.quadrantd(c),g=a.p2Point(d.x,d.y,c,d.r+b),f=a.p2Point(d.x,d.y,c,d.r+b*0.6);P2=a.p2Point(d.x,d.y,c,d.r);d.doLabel(d,P2.x,P2.y,e,[{x:P2.x,y:P2.y},{x:f.x,y:f.y},{x:g.x,y:g.y}],g.x,g.y,b*0.4)}}}});a.Sector3D=a.extend(a.Sector,{configure:function(){a.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=a._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0});this.proxy=true},isEventValid:function(c,b){if(!b.get("ignored")){if(b.isLabel()&&b.label.isEventValid(c,b.label).valid){return{valid:true}}if(!a.inEllipse(c.x-b.x,c.y-b.y,b.a,b.b)){return{valid:false}}if(a.angleZInRange(b.sA,b.eA,a.atan2Radian(b.x,b.y,c.x,c.y))){return{valid:true}}}return{valid:false}},p2p:function(b,e,c,d){return{x:b+this.a*Math.cos(c)*d,y:e+this.b*Math.sin(c)*d}},tipInvoke:function(){var c=this,b=c.get("middleAngle"),d=a.quadrantd(b);return function(e,f){var g=c.p2p(c.x,c.y,b,0.6);return{left:(d>=2&&d<=3)?(g.x-e):g.x,top:d>=3?(g.y-f):g.y}}},doConfig:function(){a.Sector3D.superclass.doConfig.call(this);var j=this._(),k=j.get("counterclockwise"),c=j.get("middleAngle");j.a=j.get("semi_major_axis");j.b=j.get("semi_minor_axis");j.h=j.get("cylinder_height");a.Assert.isTrue(j.a*j.b>=0,"major&minor");var g=2*Math.PI,b=function(n){while(n<0){n+=g}return Math.abs(a.atan2Radian(0,0,j.a*Math.cos(n),k?(-j.b*Math.sin(n)):(j.b*Math.sin(n))))},i=j.pushIf("increment",a.lowTo(5,j.a/10));j.sA=b.call(j,j.get("startAngle"));j.eA=b.call(j,j.get("endAngle"));j.mA=b.call(j,c);j.push("inc_x",i*Math.cos(g-j.mA));j.push("inc_y",i*Math.sin(g-j.mA));i*=2;if(j.get("label")){if(j.get("mini_label")){var l=j.p2p(j.x,j.y,c,0.5);j.doText(j,l.x,l.y)}else{var d=a.quadrantd(c),e=j.p2p(j.x,j.y,c,i/j.a+1),f=j.p2p(j.x,j.y,c,i*0.6/j.a+1),m=j.p2p(j.x,j.y,c,1);j.doLabel(j,m.x,m.y,d,[{x:m.x,y:m.y},{x:f.x,y:f.y},{x:e.x,y:e.y}],e.x,e.y,i*0.4)}}}});a.Pie=a.extend(a.Chart,{configure:function(){a.Pie.superclass.configure.call(this);this.type="pie";this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:false,intellectLayout:true,layout_distance:4,pop_animate:false,mutex:false,increment:undefined,sub_option:{label:{}}});this.registerEvent("bound","rebound");this.sectors=[];this.components.push(this.sectors);this.ILLUSIVE_COO=true},toggle:function(b){this.sectors[b||0].toggle()},bound:function(b){this.sectors[b||0].bound()},rebound:function(b){this.sectors[b||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(e,g,c){var b=0,f=c.oA;c.sectors.each(function(j,d){b=c.animationArithmetic(e,0,j.get("totalAngle"),g);j.push("startAngle",f);j.push("endAngle",f+=b);if(!c.is3D()){j.drawSector()}});if(c.is3D()){c.proxy.drawSector()}},parse:function(b){b.data.each(function(e,c){b.doParse(b,e,c)},b);b.localizer(b)},doParse:function(b,f,e){var c=f.name+" "+b.getPercent(f.value);b.doActing(b,f,null,e,c);b.push("sub_option.id",e);if(b.get("sub_option.label")){b.push("sub_option.label.text",c)}b.push("sub_option.listeners.changed",function(j,d,g){b.fireEvent(b,d?"bound":"rebound",[b,j.get("name")])});b.sectors.push(b.doSector(b,f))},doSector:function(b){return new a[b.sub](b.get("sub_option"),b)},dolayout:function(e,b,i,c,g,f){if(e.is3D()?a.inEllipse(e.get(e.X)-b,e.topY-i,e.a,e.b):a.distanceP2P(e.get(e.X),e.topY,b,i)<e.r){i=e.topY-i;c.push("labelx",e.get(e.X)+(Math.sqrt(e.r*e.r-i*i)*2+g)*(f==0||f==3?1:-1));c.localizer(c)}},localizer:function(e){if(e.get("intellectLayout")){var g=[],c=[],i=e.get("layout_distance"),f,b,j;e.sectors.each(function(k,d){if(k.isLabel()){g.push(k.label)}});g.sor(function(k,d){return Math.abs(Math.sin(k.get("angle")))-Math.abs(Math.sin(d.get("angle")))>0});g.each(function(d){c.each(function(k){b=k.labelx,j=k.labely;if((d.labely<=j&&(j-d.labely-1)<d.get(e.H))||(d.labely>j&&(d.labely-j-1)<k.get(e.H))){if((d.labelx<=b&&(b-d.labelx)<d.get(e.W))||(d.labelx>b&&(d.labelx-b)<k.get(e.W))){f=d.get("quadrantd");d.push("labely",(d.get("labely")+j-d.labely)+(d.get(e.H)+i)*(f>1?-1:1));d.localizer(d);e.dolayout(e,d.get("labelx"),d.get("labely")+d.get(e.H)/2*(f<2?-1:1),d,i,f)}}},e);c.push(d)})}},doConfig:function(){a.Pie.superclass.doConfig.call(this);var l=this._(),e,c=l.get("radius"),g=l.get("sub_option.label")?0.35:0.44,i=Math.PI*2;l.sub=l.is3D()?"Sector3D":"Sector2D";l.sectors.zIndex=l.get("z_index");l.sectors.length=0;l.oA=a.angle2Radian(l.get("offset_angle"))%i;if(l.is3D()){g+=0.06}var j=l.data.length,k=a.angle2Radian(a.between(0,90,l.get("separate_angle"))),m=i-k,k=k/j,b=l.oA+k,d=b;if(l.total==0){e=1/j}l.data.each(function(n,f){b+=(e||(n.value/l.total))*m;if(f==(j-1)){b=i+l.oA}n.startAngle=d;n.endAngle=b;n.totalAngle=b-d;n.middleAngle=(d+b)/2;d=b+k},l);l.r=c=a.parsePercent(c,Math.floor(l.get("minDistance")*g));l.topY=l.originXY(l,[c+l.get("l_originx"),l.get("r_originx")-c,l.get("centerx")],[l.get("centery")]).y;a.apply(l.get("sub_option"),a.clone([l.X,l.Y,"bound_event","mutex","increment"],l.options))}});a.Pie2D=a.extend(a.Pie,{configure:function(){a.Pie2D.superclass.configure.call(this);this.type="pie2d"},doConfig:function(){a.Pie2D.superclass.doConfig.call(this);var b=this._();b.push("sub_option.radius",b.r);b.parse(b)}});a.register("Pie2D");a.Pie3D=a.extend(a.Pie,{configure:function(){a.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=a._3D;this.set({zRotate:45,yHeight:30});this.positive=true},doSector:function(b,c){b.push("sub_option.cylinder_height",(c.cylinder_height?c.cylinder_height*b.get("zRotate_"):b.get("cylinder_height")));return new a[b.sub](b.get("sub_option"),b)},one:function(m){var f,l,k=[],j=m.get("counterclockwise"),p=function(d,c){return 1+Math.sin(c?(d+Math.PI):d)},n="startAngle",i="endAngle",b,o,g;lay=function(q,c,e,d){b=a.quadrantd(c);if(q&&(b==0||b==3)||(!q&&(b==2||b==1))){f.push({g:c,z:c==e,x:d.x,y:d.y,a:d.a,b:d.b,color:a.dark(d.get("background_color")),h:d.h,F:d})}};m.proxy=new a.Custom({z_index:m.get("z_index")+1,drawFn:function(){this.drawSector();k=[];m.sectors.each(function(c){if(c.get("label")){if(c.expanded){k.push(c.label)}else{c.label.draw()}}});k.each(function(c){c.draw()})}});m.proxy.drawSector=function(){m.sectors.each(function(d,c){m.T.ellipse(d.x,d.y+d.h,d.a,d.b,d.get(n),d.get(i),0,d.get("border.enable"),d.get("border.width"),d.get("border.color"),d.get("shadow"),j,true)},m);f=[];l=[];m.sectors.each(function(c){lay(j,c.get(n),c.get(i),c);lay(!j,c.get(i),c.get(n),c);l=l.concat(a.visible(c.get(n),c.get(i),c))},m);f.sor(function(e,d){var c=p(e.g)-p(d.g);return c==0?e.z:c>0});f.each(function(d,c){m.T.sector3D.layerDraw.call(m.T,d.x,d.y,d.a+0.5,d.b+0.5,j,d.h,d.g,d.color)},m);if(!m.processAnimation){l.sor(function(d,c){return p((d.s+d.e)/2,1)-p((c.s+c.e)/2,1)<0})}l.each(function(d,c){m.T.sector3D.sPaint.call(m.T,d.f.x,d.f.y,d.f.a,d.f.b,d.s,d.e,j,d.f.h,d.f.get("f_color"))},m);m.sectors.each(function(d,c){m.T.ellipse(d.x,d.y,d.a,d.b,d.get(n),d.get(i),d.get("f_color"),d.get("border.enable"),d.get("border.width"),d.get("border.color"),false,false,true)},m)};m.one=a.emptyFn},doConfig:function(){a.Pie3D.superclass.doConfig.call(this);var b=this._(),c=a.angle2Radian(b.get("zRotate"));b.push("cylinder_height",b.get("yHeight")*b.push("zRotate_",Math.abs(Math.cos(c))));b.a=b.push("sub_option.semi_major_axis",b.r);b.b=b.push("sub_option.semi_minor_axis",b.r*Math.abs(Math.sin(c)));b.topY=b.push("sub_option.originy",b.get(b.Y)-b.get("yHeight")/2);b.parse(b);b.one(b);b.components.push(b.proxy)}});a.register("Pie3D");a.Donut2D=a.extend(a.Pie,{configure:function(){a.Donut2D.superclass.configure.call(this);this.type="donut2d";this.set({donutwidth:0.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){a.Donut2D.superclass.doConfig.call(this);var b=this._(),e="donutwidth",c=b.r;b.push("sub_option.radius",c);if(b.get(e)>0){if(b.get(e)<1){b.push(e,Math.floor(c*b.get(e)))}else{if(b.get(e)>=c){b.push(e,0)}}b.push("sub_option.donutwidth",b.get(e))}if(a.isString(b.get("center"))){b.push("center",a.applyIf({text:b.get("center")},b.default_.center))}if(b.get("center.text")!=""){b.push("center.originx",b.get(b.X));b.push("center.originy",b.get(b.Y));b.push("center.textBaseline","middle");b.center=new a.Text(b.get("center"),b);b.components.push(b.center)}b.parse(b)}});a.register("Donut2D");a.Column=a.extend(a.Chart,{configure:function(b){a.Column.superclass.configure.call(this);this.type="column";this.set({coordinate:{},column_width:undefined,column_space:undefined,text_space:6,scaleAlign:"left",sub_option:{},label:{}});this.registerEvent();this.rectangles=[];this.labels=[];this.components.push(this.labels);this.components.push(this.rectangles)},doAnimation:function(c,f,b){var e;b.labels.each(function(d){d.draw()});b.rectangles.each(function(d){e=Math.ceil(b.animationArithmetic(c,0,d.height,f));d.push(b.Y,d.y+(d.height-e));d.push(b.H,e);d.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(c,f,d,b,e){c.labels.push(new a.Text(a.apply(c.get("label"),{id:f,text:d,originx:b,originy:e}),c))},doParse:function(b,f,c,e){b.doActing(b,f,e,c)},engine:function(k){var d=k.get("column_width"),m=k.get("column_space"),c=k.coo.getScale(k.get("scaleAlign")),j=k.coo.valid_height,e=d/2,b=d*(k.get("group_fator")||0),l=k.dataType!="complex"?(d+m):(k.data.length*d+m+(k.is3D()?(k.data.length-1)*b:0)),i=k.coo.get("y_end"),f=i-c.basic*j-(k.is3D()?(k.get("zHeight")*(k.get("bottom_scale")-1)/2*k.get("yAngle_")):0),g=m+k.coo.get("x_start");i=i+k.get("text_space")+k.coo.get("axis.width")[2];k.doEngine(k,d,m,c,j,e,b,l,g,f,i)},doConfig:function(){a.Column.superclass.doConfig.call(this);var b=this._(),e="column_width",d="z_index";b.sub=b.is3D()?"Rectangle3D":"Rectangle2D";b.rectangles.length=0;b.labels.length=0;b.rectangles.zIndex=b.get(d);b.labels.zIndex=b.get(d)+1;b.coo=a.Coordinate.coordinate_.call(b,function(){var g=b.data.length,f=b.get("coordinate.valid_width_value"),j,c,i;if(b.dataType=="complex"){i=b.get("labels").length;g=i*g+(b.is3D()?(g-1)*i*b.get("group_fator"):0);j=Math.floor(f/(i+1+g));c=b.pushIf(e,j);i+=1}else{if(b.dataType=="stacked"){g=b.get("labels").length}j=Math.floor(f*2/(g*3+1));c=b.pushIf(e,j);i=g+1}if(c*g>f){c=b.push(e,j)}b.push("column_space",(f-c*g)/i);if(b.is3D()){b.push("zHeight",b.get(e)*b.get("zScale"));b.push("sub_option.zHeight",b.get("zHeight"));b.push("sub_option.xAngle_",b.get("xAngle_"));b.push("sub_option.yAngle_",b.get("yAngle_"))}});b.push("sub_option.width",b.get(e))}});a.Column2D=a.extend(a.Column,{configure:function(){a.Column2D.superclass.configure.call(this);this.type="column2d"},doEngine:function(l,d,n,c,k,e,b,m,i,g,j){var f;l.data.each(function(p,o){f=(p.value-c.start)*k/c.distance;l.doParse(l,p,o,{id:o,originx:i+o*m,originy:g-(f>0?f:0),height:Math.abs(f)});l.rectangles.push(new a[l.sub](l.get("sub_option"),l));l.doLabel(l,o,p.name,i+m*o+e,j)},l)},doConfig:function(){a.Column2D.superclass.doConfig.call(this);this.engine(this)}});a.register("Column2D");a.Column3D=a.extend(a.Column2D,{configure:function(){a.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=a._3D;this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){a.Column3D.superclass.doConfig.call(this)}});a.register("Column3D");a.ColumnMulti2D=a.extend(a.Column,{configure:function(){a.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(l,d,n,c,k,e,b,m,i,g,j){var f;l.columns.each(function(p,o){p.item.each(function(r,q){f=(r.value-c.start)*k/c.distance;l.doParse(l,r,q,{id:o+"_"+q,originx:i+q*(d+b)+o*m,originy:g-(f>0?f:0),height:Math.abs(f)});l.rectangles.push(new a[l.sub](l.get("sub_option"),l))},l);l.doLabel(l,o,p.name,i-n*0.5+(o+0.5)*m,j)},l)},doConfig:function(){a.ColumnMulti2D.superclass.doConfig.call(this);this.engine(this)}});a.register("ColumnMulti2D");a.ColumnMulti3D=a.extend(a.ColumnMulti2D,{configure:function(){a.ColumnMulti3D.superclass.configure.call(this);this.type="columnmulti3d";this.dataType="complex";this.dimension=a._3D;this.set({xAngle:60,yAngle:20,zScale:1,group_fator:0.3,bottom_scale:1.4})},doConfig:function(){a.ColumnMulti3D.superclass.doConfig.call(this)}});a.register("ColumnMulti3D");a.ColumnStacked2D=a.extend(a.Column,{configure:function(){a.ColumnStacked2D.superclass.configure.call(this);this.type="columnstacked2d";this.dataType="stacked";this.set({percent:false,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(o,e,t,d,n,f,b,r,k,j,l){var i,g,m,c=o.get("percent");o.columns.each(function(q,p){i=0;m=c?100/q.total:1;q.item.each(function(v,s){data={};for(var u in v){data[u]=v[u];if((u=="color"||u=="background_color")&&v[u] instanceof Array){data[u]=v[u][p]}}g=(data.value*m-d.start)*n/d.distance;data.total=q.total;o.doParse(o,data,s,{id:p+"_"+s,originx:k+p*r,originy:j-(g>0?g:0)-i,height:Math.abs(g)});i+=g;o.rectangles.push(new a[o.sub](o.get("sub_option"),o))},o);o.doLabel(o,p,q.name,k-t*0.5+(p+0.5)*r,l)},o)},doConfig:function(){a.ColumnStacked2D.superclass.doConfig.call(this);this.engine(this)}});a.register("ColumnStacked2D");a.ColumnStacked3D=a.extend(a.ColumnStacked2D,{configure:function(){a.ColumnStacked3D.superclass.configure.call(this);this.type="columnstacked3d";this.dataType="stacked";this.dimension=a._3D;this.set({percent:false,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){a.ColumnStacked3D.superclass.doConfig.call(this)}});a.register("ColumnStacked3D");a.Bar=a.extend(a.Chart,{configure:function(){a.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{striped_direction:"h"},bar_height:undefined,bar_space:undefined,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(c,f,d,b,e){c.labels.push(new a.Text(a.apply(c.get("label"),{id:f,text:d,textAlign:"right",textBaseline:"middle",originx:b,originy:e}),c))},doParse:function(b,f,c,e){b.doActing(b,f,e,c)},engine:function(j){var e=j.get("bar_height"),l=j.get("bar_space"),d=j.coo.getScale(j.get("scaleAlign")),c=j.coo.valid_width,f=e/2,k=j.dataType!="complex"?e+l:j.data.length*e+l,g=j.coo.get("x_start")+d.basic*c,b=j.coo.get(j.X)-j.get("text_space")-j.coo.get("axis.width")[3],i=j.coo.get("y_start")+l;j.doEngine(j,e,l,d,c,f,k,g,b,i)},doAnimation:function(c,e,b){b.labels.each(function(d){d.draw()});b.rectangles.each(function(d){d.push(b.W,Math.ceil(b.animationArithmetic(c,0,d.width,e)));d.drawRectangle()})},doConfig:function(){a.Bar.superclass.doConfig.call(this);var d=this._(),c="bar_height",e="z_index";d.rectangles=[];d.labels=[];d.rectangles.zIndex=d.get(e);d.labels.zIndex=d.get(e)+1;d.components.push(d.labels);d.components.push(d.rectangles);d.coo=a.Coordinate.coordinate_.call(d,function(){var b=d.data.length,i=d.get("coordinate.valid_height_value"),f,g,j;if(d.dataType=="complex"){j=d.get("labels").length;b=j*b+(d.is3D()?(b-1)*j*d.get("group_fator"):0);f=Math.floor(i/(j+1+b));g=d.pushIf(c,f);j+=1}else{if(d.dataType=="stacked"){b=d.get("labels").length}f=Math.floor(i*2/(b*3+1));g=d.pushIf(c,f);j=b+1}if(g*b>i){g=d.push(c,f)}d.push("bar_space",(i-g*b)/j)});d.push("sub_option.height",d.get(c));d.push("sub_option.valueAlign",d.R);d.push("sub_option.tipAlign",d.R)}});a.Bar2D=a.extend(a.Bar,{configure:function(){a.Bar2D.superclass.configure.call(this);this.type="bar2d"},doEngine:function(k,e,m,d,c,f,l,g,b,j){var i;k.data.each(function(o,n){i=(o.value-d.start)*c/d.distance;k.doParse(k,o,n,{id:n,originy:j+n*l,width:Math.abs(i),originx:g+(i>0?0:-Math.abs(i))});k.rectangles.push(new a.Rectangle2D(k.get("sub_option"),k));k.doLabel(k,n,o.name,b,j+n*l+f)},k)},doConfig:function(){a.Bar2D.superclass.doConfig.call(this);this.engine(this)}});a.register("Bar2D");a.BarMulti2D=a.extend(a.Bar,{configure:function(){a.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(k,e,m,d,c,f,l,g,b,j){var i;k.columns.each(function(o,n){o.item.each(function(q,p){i=(q.value-d.start)*c/d.distance;k.doParse(k,q,p,{id:n+"_"+p,originy:j+p*e+n*l,width:Math.abs(i),originx:g+(i>0?0:-Math.abs(i))});k.rectangles.push(new a.Rectangle2D(k.get("sub_option"),k))},k);k.doLabel(k,n,o.name,b,j-m*0.5+(n+0.5)*l)},k)},doConfig:function(){a.BarMulti2D.superclass.doConfig.call(this);this.engine(this)}});a.register("BarMulti2D");a.BarStacked2D=a.extend(a.Bar,{configure:function(){a.BarStacked2D.superclass.configure.call(this);this.type="barstacked2d";this.dataType="stacked";this.set({percent:false,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(n,f,q,e,d,i,o,j,c,l){var g,k,m,b=n.get("percent");n.columns.each(function(r,p){g=0;m=b?100/r.total:1;r.item.each(function(t,s){k=(t.value*m-e.start)*d/e.distance;t.total=r.total;n.doParse(n,t,s,{id:p+"_"+s,originy:l+p*o,originx:j+(k>0?0:-Math.abs(k))+g,width:Math.abs(k)});g+=k;n.rectangles.push(new a.Rectangle2D(n.get("sub_option"),n))},n);n.doLabel(n,p,r.name,c,l-q*0.5+(p+0.5)*o)},n)},doConfig:function(){a.BarStacked2D.superclass.doConfig.call(this);this.push("sub_option.valueAlign",this.C);this.engine(this)}});a.register("BarStacked2D");a.LineSegment=a.extend(a.Component,{configure:function(){a.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({brushsize:1,intersection:true,label:{},sign:"round",area_color:null,hollow:true,hollow_inside:true,hollow_color:"#FEFEFE",smooth:false,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:false,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:false,tip_offset:2,event_range_y:0});this.registerEvent("parseText");this.tip=null},drawSegment:function(){var b=this._();b.polygons.each(function(c){b.T.polygon.apply(b.T,c)});b.T.shadowOn(b.get("shadow"));b.lines.each(function(c){b.T.lineArray.apply(b.T,c)});b.intersections.each(function(c){if(b.sign_plugin){b.sign_plugin_fn.apply(b,c)}else{b.T.round0.apply(b.T,c)}});if(b.get("shadow")){b.T.shadowOff()}},doDraw:function(b){b.drawSegment();if(b.get("label")){b.labels.each(function(c){c.draw()})}},isEventValid:function(){},tipInvoke:function(){var b=this.x,f=this.y,e=this.get("tip_offset"),d=this.get("point_size")+e,c=this;return function(j,n,g){var i=g.left,k=g.top;i=((c.tipPosition<3&&(i-j-b-e>0))||(c.tipPosition>2&&(i-j-b-e<0)))?i-(j+e):i+e;k=c.tipPosition%2==0?k+d:k-n-d;return{left:i,top:k}}},PP:function(d,g,c,f,b,e){if(d.get("area")){d.polygons.push([d.get("area_color")||d.get("light_color2"),0,d.get("brushsize"),0,0,d.get("area_opacity"),d.get("smooth")?g:[{x:c,y:f}].concat(g.concat([{x:b,y:e}])),d.get("smooth"),d.get("smoothing")||1.5,[{x:c,y:f},{x:b,y:e}]])}},parse:function(u){u.polygons=[];u.lines=[];u.intersections=[];u.labels=[];var d=u.get("points"),t=u.get("intersection"),q=!!u.get("label"),i=[],m=false,v=u.get("smooth"),e=u.get("smoothing")||1.5,r=u.get("f_color"),l=u.get("brushsize"),c=u.get("point_size");if(t){var o=u.getPlugin("sign"),n=r,k=u.get("hollow_color");u.sign_plugin=a.isFunction(o);u.sign_plugin_fn=o;if(u.get("hollow_inside")){n=k;k=r}}d.each(function(b){b.x_=b.x;b.y_=b.y;if(!b.ignored&&q){u.push("label.originx",b.x);u.push("label.originy",b.y-c/2-1);u.push("label.text",u.fireString(u,"parseText",[u,b.value],b.value));a.applyIf(u.get("label"),{textBaseline:"bottom",color:u.get("f_color")});u.labels.push(new a.Text(u.get("label"),u))}if(b.ignored&&m){u.lines.push([i,l,r,v,e]);u.PP(u,i,i[0].x,u.y,i[i.length-1].x,u.y);i=[];m=false}else{if(!b.ignored){i.push(b);m=true}}if(t&&!b.ignored){u.intersections.push(u.sign_plugin?[u.T,u.get("sign"),b,c,b.color||n,b.hollow_color||k]:u.get("hollow")?[b,c/2-l+1,b.color||n,l+1,b.hollow_color||k]:[b,c/2,b.color||n])}});if(i.length){u.lines.push([i,l,r,v,e]);u.PP(u,i,i[0].x,u.y,i[i.length-1].x,u.y)}},doConfig:function(){a.LineSegment.superclass.doConfig.call(this);a.Assert.isTrue(this.get("point_space")>0,"point_space");var r=this._(),d=r.get("point_size")*3/2,i=r.get("point_space"),e=r.get("event_range_y"),f=r.get("event_range_x"),l=r.get("tipInvokeHeap"),g=r.get("points"),n=r.get("name");r.parse(r);if(f<=0||f>i/2){f=r.push("event_range_x",i/2)}if(e==0){e=r.push("event_range_y",d/2)}if(r.get("tip.enable")){r.on("mouseover",function(s,p,k){l.push(r);r.tipPosition=l.length}).on("mouseout",function(s,p,k){l.pop()});r.push("tip.invokeOffsetDynamic",true);r.tip=new a.Tip(r.get("tip"),r)}var o=r.get("coordinate"),j=r.get("limit_y"),m=r.get("keep_with_coordinate"),b=function(p,c,k){if(!p.ignored&&Math.abs(c-(p.x))<f&&(!j||(j&&Math.abs(k-(p.y))<e))){return true}return false},q=function(c){return{valid:true,name:n,value:g[c].value,text:g[c].text,top:g[c].y,left:g[c].x,i:c,hit:true}};r.isEventValid=function(p){if(o&&!o.isEventValid(p,o).valid){return{valid:false}}var k=Math.floor((p.x-r.x)/i);if(k<0||k>=(g.length-1)){k=a.between(0,g.length-1,k);if(b(g[k],p.x,p.y)){return q(k)}else{return{valid:m}}}for(var c=k;c<=k+1;c++){if(b(g[c],p.x,p.y)){return q(c)}}return{valid:m}}}});a.Line=a.extend(a.Chart,{configure:function(){a.Line.superclass.configure.call(this);this.type="line";this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:false},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:true,sub_option:{},legend:{sign:"bar"},label:{}});this.registerEvent("parsePoint");this.lines=[];this.components.push(this.lines)},getCoordinate:function(){return this.coo},doConfig:function(){a.Line.superclass.doConfig.call(this);var v=this._(),w=v.data.length==1;v.lines.length=0;v.lines.zIndex=v.get("z_index");var j=v.pushIf("sub_option.keep_with_coordinate",w);if(v.get("crosshair.enable")){v.pushIf("crosshair.hcross",w);v.push("crosshair.invokeOffset",function(p,f){var k=v.lines[0].isEventValid(p);return k.valid?k:j})}if(!v.Combination){v.push("coordinate.crosshair",v.get("crosshair"));v.pushIf("coordinate.scale",[{position:v.get("scaleAlign"),max_scale:v.get("maxValue")},{position:v.get("labelAlign"),start_scale:1,scale:1,end_scale:v.get("maxItemSize"),labels:v.get("labels"),label:v.get("label")}])}v.coo=a.Coordinate.coordinate_.call(v);if(v.Combination){v.coo.push("crosshair",v.get("crosshair"));v.coo.doCrosshair(v.coo)}var t=v.coo.valid_width,m=t,z=v.get("maxItemSize")-1,n=t/(z),c=v.get("point_space");if(v.get("proportional_spacing")){if(c&&c<n){m=z*c}else{v.push("point_space",n)}}v.push("sub_option.width",m);v.push("sub_option.height",v.coo.valid_height);v.push("sub_option.originx",v.coo.get("x_start")+(t-m)/2);v.push("sub_option.originy",v.coo.get("y_end"));if(v.get("tip.enable")){if(!v.mocker&&a.isFunction(v.get("tipMocker"))){v.push("sub_option.tip.enable",false);v.push("tip.invokeOffsetDynamic",true);var i,q=v.coo.get(v.X),o=v.coo.get(v.Y),u=v.coo.height,l=v.get("tipMockerOffset"),g,b,e;l=a.isNumber(l)?(l<0?0:(l>1?1:l)):null;v.push("tip.invokeOffset",function(k,p,f){if(l!=null){f.top=o+(u-p)*l}else{f.top=f.maxTop-(f.maxTop-f.minTop)/3-p;if(p>u||o>f.top){f.top=o}}return{left:(f.left-k-q>5)?f.left-k-5:f.left+5,top:f.top}});var d=v.get("tip.listeners.parseText");if(d){delete v.get("tip.listeners").parseText}v.mocker=new a.Custom({eventValid:function(f){b=v.lines[0].isEventValid(f);b.hit=g!=b.i;if(b.valid){g=b.i;i=[];v.lines.each(function(k,p){e=k.isEventValid(f);if(p==0){b.minTop=b.maxTop=e.top}else{b.minTop=Math.min(b.minTop,e.top);b.maxTop=Math.max(b.maxTop,e.top)}i.push(d?d(null,e.name,e.value,e.text,e.i):(e.name+" "+e.value))});b.text=v.get("tipMocker").call(v,i,b.i)||"tipMocker not return"}return b.valid?b:false}});new a.Tip(v.get("tip"),v.mocker);v.register(v.mocker)}}v.pushIf("sub_option.area_opacity",v.get("area_opacity"))}});a.LineBasic2D=a.extend(a.Line,{configure:function(){a.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(c,e,b){b.lines.each(function(d){d.get("points").each(function(f){f.y=d.y-Math.ceil(b.animationArithmetic(c,0,d.y-f.y_,e))});d.drawSegment()})},doConfig:function(){a.LineBasic2D.superclass.doConfig.call(this);var l=this._();var f,k=l.coo.valid_height,d=l.get("point_space"),j,i,g,e=l.get("sub_option.originx"),c,b;l.push("sub_option.tip.showType","follow");l.push("sub_option.coordinate",l.coo);l.push("sub_option.tipInvokeHeap",l.tipInvokeHeap);l.push("sub_option.point_space",d);l.data.each(function(n,m){f=l.coo.getScale(n.scaleAlign||l.get("scaleAlign"));c=l.get("sub_option.originy")-f.basic*k;j=[];n.value.each(function(o,p){i=d*p;g=(o-f.start)*k/f.distance;b={x:e+i,y:c-g,value:o,text:n.name+" "+o};a.merge(b,l.fireEvent(l,"parsePoint",[n,o,i,g,p,f]));j.push(b)},l);a.merge(l.get("sub_option"),n);l.push("sub_option.points",j);l.push("sub_option.brushsize",n.linewidth||n.line_width);l.lines.push(new a.LineSegment(l.get("sub_option"),l))},this)}});a.register("LineBasic2D");a.Area2D=a.extend(a.LineBasic2D,{configure:function(){a.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:0.3})},doConfig:function(){this.push("sub_option.area",true);a.Area2D.superclass.doConfig.call(this)}});a.register("Area2D")})(iChart);